<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>XHCI</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<h1 id="å‰è¨€">å‰è¨€</h1>
<p>æœ¬æ–‡å‚è€ƒäº† <a href="https://wiki.osdev.org/XHCI">XHCI on OS Dev</a> ä»¥åŠ ã€ŠUSB: The Universal Series Busã€‹ã€‚ä»£ç å­˜å‚¨äº <code>github.com/juruohejiarui/VCPP-2.git</code> ä¸­çš„ <code>VOS/kernel/hardware/USB</code> .</p>
<p>éœ€è¦å…ˆç®€å•äº†è§£ PCIe çš„æ•°æ®ç»“æ„å’Œæšä¸¾ã€æ£€æµ‹ UEFI æä¾›çš„ PCIe ä¿¡æ¯çš„æ–¹æ³•ã€‚</p>
<p>å¯ä»¥éµå¾ªä¸‹åˆ—æ­¥éª¤è®¾ç½®ä½ çš„XHCIæ§åˆ¶å™¨ï¼š</p>
<ol type="1">
<li>æ‰¾åˆ°æ‰€æœ‰ XHCI çš„æ•°æ®ç»“æ„</li>
<li>è·å–æ‰€éœ€è¦çš„ä¿¡æ¯ï¼Œå»ºç«‹æ‰€éœ€è¦çš„é¢å¤–çš„æ•°æ®ç»“æ„</li>
<li>é‡ç½®æ§åˆ¶å™¨ï¼Œå¹¶è®¾ç½®æ§åˆ¶å™¨</li>
<li>å¯åŠ¨æ§åˆ¶å™¨</li>
<li>å¼€å¯ç›‘æµ‹è¿›ç¨‹</li>
</ol>
<h1 id="æ•°æ®ç»“æ„å’Œæ³¨é‡Š">æ•°æ®ç»“æ„å’Œæ³¨é‡Š</h1>
<p>XHCI æ§åˆ¶å™¨æœ‰å¤§é‡çš„å¯„å­˜å™¨ç»„å’Œæè¿°ï¼Œéœ€è¦ä¸€å®šçš„è€å¿ƒã€‚ä½†æ˜¯æˆ‘ä»¬ä¸éœ€è¦å…¨éƒ¨äº†è§£ï¼Œåªéœ€è¦çŸ¥é“ä¸€äº›åŸºæœ¬çš„ï¼Œå¯ä»¥ç”¨äºè®¾å¤‡æšä¸¾ï¼Œæ£€æµ‹å’Œé€šä¿¡çš„å¯„å­˜å™¨å°±å¯ä»¥äº†ã€‚ä½†æ˜¯ä¸ºäº†æŸ¥é˜…æ–¹ä¾¿ï¼Œè¿™é‡Œæˆ‘è¿˜æ˜¯å‡ ä¹å®Œå…¨æ‘˜æŠ„äº†ã€ŠUSB: The Universal Series Busã€‹å¯¹äºæ¯ä¸€ä¸ªæè¿°ç¬¦çš„è§£é‡Šã€‚å½“æˆ‘ä»¬éœ€è¦æŸäº›åŠŸèƒ½çš„æ—¶å€™å†å›æ¥æŸ¥é˜…è¡¨æ ¼å³å¯ã€‚å¦‚æœå­¦ä¹ è¿‡ç¨‹ä¸­å‘ç°ä¸€äº›ä¸æ‡‚å¾—åè¯ï¼Œå¯ä»¥å…ˆæŠŠå®ƒè®°ä¸‹æ¥ï¼Œä¹‹åé‡åˆ°äº†å®šä¹‰æˆ–è§£é‡Šçš„æ—¶å€™å†è¿”å›æ¥çœ‹ï¼Œå¦‚æœä¹‹åéƒ½æ²¡æœ‰å‡ºç°ï¼Œé‚£ä¹ˆå°±å¯ä»¥è®¤ä¸ºå®ƒå¹¶ä¸é‡è¦ã€‚</p>
<h2 id="pcie">PCIe</h2>
<p>ä» UEFI æä¾›çš„ <code>MCFG</code> è¡¨ä¸­ï¼Œå¯ä»¥è¯»å‡ºä¸€ä¸ª PCIe æ•°æ®è¡¨å¤´çš„ç»“æ„ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º <code>PCIeConfig</code>ï¼Œå¯¹äº XHCI è®¾å¤‡ï¼Œå…¶ç»“æ„ä¸€èˆ¬å¦‚ä¸‹ï¼š</p>
<table>
<colgroup>
<col style="width: 17%" />
<col style="width: 29%" />
<col style="width: 29%" />
<col style="width: 23%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">Offset</th>
<th style="text-align: center;">Size(Byte)</th>
<th style="text-align: center;">Name</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">0x0</td>
<td style="text-align: center;"><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>2</mn><annotation encoding="application/x-tex">2</annotation></semantics></math></td>
<td style="text-align: center;">Vendor ID</td>
<td style="text-align: left;">åˆ¶é€ å•† ID</td>
</tr>
<tr class="even">
<td style="text-align: center;">0x2</td>
<td style="text-align: center;"><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>2</mn><annotation encoding="application/x-tex">2</annotation></semantics></math></td>
<td style="text-align: center;">Device ID</td>
<td style="text-align: left;">åˆ¶é€ å•†ç”³è¯·çš„è®¾å¤‡ç‰¹å®šçš„ ID</td>
</tr>
<tr class="odd">
<td style="text-align: center;">0x4</td>
<td style="text-align: center;"><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>2</mn><annotation encoding="application/x-tex">2</annotation></semantics></math></td>
<td style="text-align: center;">Command</td>
<td style="text-align: left;">ç”¨äºæ“ä½œè¯¥PCIeè®¾å¤‡çš„å¯„å­˜å™¨</td>
</tr>
<tr class="even">
<td style="text-align: center;">0x6</td>
<td style="text-align: center;"><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>2</mn><annotation encoding="application/x-tex">2</annotation></semantics></math></td>
<td style="text-align: center;">Status</td>
<td style="text-align: left;">è¯¥è®¾å¤‡çš„çŠ¶æ€</td>
</tr>
<tr class="odd">
<td style="text-align: center;">0x8</td>
<td style="text-align: center;"><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>1</mn><annotation encoding="application/x-tex">1</annotation></semantics></math></td>
<td style="text-align: center;">Revision ID</td>
<td style="text-align: left;">æˆ‘ä¹Ÿä¸æ‡‚ï¼Œåº”è¯¥ä¸å¤ªé‡è¦ï¼Œå¯ä»¥å¿½ç•¥</td>
</tr>
<tr class="even">
<td style="text-align: center;">0x9</td>
<td style="text-align: center;"><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>1</mn><annotation encoding="application/x-tex">1</annotation></semantics></math></td>
<td style="text-align: center;">Prog IF</td>
<td style="text-align: left;">Program Interface Byte, åªè¯»ï¼Œç”¨äºå¯„å­˜å™¨çº§åˆ«ä¸‹æŒ‡å®šè¯¥è®¾å¤‡çš„ç±»åˆ«</td>
</tr>
<tr class="odd">
<td style="text-align: center;">0xa</td>
<td style="text-align: center;"><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>1</mn><annotation encoding="application/x-tex">1</annotation></semantics></math></td>
<td style="text-align: center;">Subclass</td>
<td style="text-align: left;">å­ç±» ID</td>
</tr>
<tr class="even">
<td style="text-align: center;">0xb</td>
<td style="text-align: center;"><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>1</mn><annotation encoding="application/x-tex">1</annotation></semantics></math></td>
<td style="text-align: center;">Class Id</td>
<td style="text-align: left;">ç±» ID</td>
</tr>
<tr class="odd">
<td style="text-align: center;">0xc</td>
<td style="text-align: center;"><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>1</mn><annotation encoding="application/x-tex">1</annotation></semantics></math></td>
<td style="text-align: center;">Cache Line Size</td>
<td style="text-align: left;">æˆ‘ä¹Ÿä¸æ‡‚ï¼Œåº”è¯¥ä¸å¤ªé‡è¦ï¼Œå¯ä»¥å¿½ç•¥</td>
</tr>
<tr class="even">
<td style="text-align: center;">0xd</td>
<td style="text-align: center;"><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>1</mn><annotation encoding="application/x-tex">1</annotation></semantics></math></td>
<td style="text-align: center;">Latency Timer</td>
<td style="text-align: left;">ç”¨äºPCIï¼ŒPCIeä¸æ”¯æŒï¼Œå›ºå®šä¸º <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>0</mn><annotation encoding="application/x-tex">0</annotation></semantics></math></td>
</tr>
<tr class="odd">
<td style="text-align: center;">0xe</td>
<td style="text-align: center;"><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>1</mn><annotation encoding="application/x-tex">1</annotation></semantics></math></td>
<td style="text-align: center;">Header Type</td>
<td style="text-align: left;">æŒ‡ç¤ºè¯¥è¡¨å¤´å‰©ä½™å†…å®¹çš„ç»“æ„</td>
</tr>
<tr class="even">
<td style="text-align: center;">0xf</td>
<td style="text-align: center;"><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>1</mn><annotation encoding="application/x-tex">1</annotation></semantics></math></td>
<td style="text-align: center;">BIST</td>
<td style="text-align: left;">Built-in self test, è®¾å¤‡çš„å†…å»ºè‡ªæ£€çŠ¶æ€å’Œæ§åˆ¶å¯„å­˜å™¨</td>
</tr>
<tr class="odd">
<td style="text-align: center;">0x10</td>
<td style="text-align: center;"><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>4</mn><annotation encoding="application/x-tex">4</annotation></semantics></math></td>
<td style="text-align: center;">Bar0</td>
<td style="text-align: left;">Base Address 0</td>
</tr>
<tr class="even">
<td style="text-align: center;">0x14</td>
<td style="text-align: center;"><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>4</mn><annotation encoding="application/x-tex">4</annotation></semantics></math></td>
<td style="text-align: center;">Bar1</td>
<td style="text-align: left;">Base Address <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>1</mn><annotation encoding="application/x-tex">1</annotation></semantics></math></td>
</tr>
<tr class="odd">
<td style="text-align: center;">0x18</td>
<td style="text-align: center;"><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>4</mn><annotation encoding="application/x-tex">4</annotation></semantics></math></td>
<td style="text-align: center;">Bar2</td>
<td style="text-align: left;">Base Address <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>2</mn><annotation encoding="application/x-tex">2</annotation></semantics></math></td>
</tr>
<tr class="even">
<td style="text-align: center;">0x1c</td>
<td style="text-align: center;"><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>4</mn><annotation encoding="application/x-tex">4</annotation></semantics></math></td>
<td style="text-align: center;">Bar3</td>
<td style="text-align: left;">Base Address 3</td>
</tr>
<tr class="odd">
<td style="text-align: center;">0x20</td>
<td style="text-align: center;"><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>4</mn><annotation encoding="application/x-tex">4</annotation></semantics></math></td>
<td style="text-align: center;">Bar4</td>
<td style="text-align: left;">Base Address <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>4</mn><annotation encoding="application/x-tex">4</annotation></semantics></math></td>
</tr>
<tr class="even">
<td style="text-align: center;">0x24</td>
<td style="text-align: center;"><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>4</mn><annotation encoding="application/x-tex">4</annotation></semantics></math></td>
<td style="text-align: center;">Bar5</td>
<td style="text-align: left;">Base Address 5</td>
</tr>
<tr class="odd">
<td style="text-align: center;">0x28</td>
<td style="text-align: center;"><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>4</mn><annotation encoding="application/x-tex">4</annotation></semantics></math></td>
<td style="text-align: center;">Cardbus CIS Pointer</td>
<td style="text-align: left;">æŒ‡å‘ Cardbus ç»“æ„çš„æŒ‡é’ˆï¼Œè¯¥å€¼è¢« PCI å’Œ Cardbus å…±äº«ï¼ˆæœºç¿»ï¼‰</td>
</tr>
<tr class="even">
<td style="text-align: center;">0x2c</td>
<td style="text-align: center;"><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>2</mn><annotation encoding="application/x-tex">2</annotation></semantics></math></td>
<td style="text-align: center;">Subsystem Vendor ID</td>
<td style="text-align: left;">å­ç³»ç»Ÿçš„Vendor ID, ä¸é‡è¦</td>
</tr>
<tr class="odd">
<td style="text-align: center;">0x2e</td>
<td style="text-align: center;"><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>2</mn><annotation encoding="application/x-tex">2</annotation></semantics></math></td>
<td style="text-align: center;">subsystem ID</td>
<td style="text-align: left;">å­ç³»ç»ŸIDï¼Œä¸é‡è¦</td>
</tr>
<tr class="even">
<td style="text-align: center;">0x30</td>
<td style="text-align: center;"><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>4</mn><annotation encoding="application/x-tex">4</annotation></semantics></math></td>
<td style="text-align: center;">Expansion ROM base address</td>
<td style="text-align: left;">ä¸æ‡‚ï¼Œåº”è¯¥ä¸å¤ªé‡è¦</td>
</tr>
<tr class="odd">
<td style="text-align: center;">0x34</td>
<td style="text-align: center;"><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>1</mn><annotation encoding="application/x-tex">1</annotation></semantics></math></td>
<td style="text-align: center;">Capabilities Pointer</td>
<td style="text-align: left;">ä½¿èƒ½å¯„å­˜å™¨çš„åç§»é‡</td>
</tr>
<tr class="even">
<td style="text-align: center;">0x35</td>
<td style="text-align: center;"><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>7</mn><annotation encoding="application/x-tex">7</annotation></semantics></math></td>
<td style="text-align: center;">Reserved</td>
<td style="text-align: left;">ä¿ç•™ä½ç½®ï¼Œä¸èƒ½è¯»å†™</td>
</tr>
<tr class="odd">
<td style="text-align: center;">0x3c</td>
<td style="text-align: center;"><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>1</mn><annotation encoding="application/x-tex">1</annotation></semantics></math></td>
<td style="text-align: center;">Interrupt Line</td>
<td style="text-align: left;">ç”¨äºæŒ‡å®šè¯¥è®¾å¤‡è¿æ¥åˆ° PIC (ä¸æ˜¯I/O APIC) çš„ (IRQ0,IRQ1â€¦IRQ15) å“ªä¸ªï¼ˆäº›ï¼‰å¼•è„š, <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtext mathvariant="monospace">ğŸ¶ğš¡ğšğš</mtext><annotation encoding="application/x-tex">\texttt{0xff}</annotation></semantics></math> åˆ™è¡¨ç¤ºæ— è¿æ¥</td>
</tr>
<tr class="even">
<td style="text-align: center;">0x3d</td>
<td style="text-align: center;"><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>1</mn><annotation encoding="application/x-tex">1</annotation></semantics></math></td>
<td style="text-align: center;">Interrupt PIN</td>
<td style="text-align: left;">ç”¨äºæŒ‡å®šè¯¥è®¾å¤‡ä½¿ç”¨å“ªä¸ªä¸­æ–­å¼•è„šï¼Œ<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="monospace">ğŸ¶ğš¡ğŸ¶</mtext><mo>â†’</mo><mtext mathvariant="normal">does not use</mtext><mo>,</mo><mtext mathvariant="monospace">ğŸ¶ğš¡ğŸ·</mtext><mo>â†’</mo><mtext mathvariant="monospace">ğ™¸ğ™½ğšƒğ™°</mtext><mo>,</mo><mtext mathvariant="monospace">ğŸ¶ğš¡ğŸ¸</mtext><mo>â†’</mo><mtext mathvariant="monospace">ğ™¸ğ™½ğšƒğ™±</mtext></mrow><annotation encoding="application/x-tex">\texttt{0x0}\rightarrow \text{does not use},\texttt{0x1}\rightarrow \texttt{INTA}, \texttt{0x2}\rightarrow \texttt{INTB}</annotation></semantics></math>, <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="monospace">ğŸ¶ğš¡ğŸ¹</mtext><mo>â†’</mo><mtext mathvariant="monospace">ğ™¸ğ™½ğšƒğ™²</mtext></mrow><annotation encoding="application/x-tex">\texttt{0x3}\rightarrow \texttt{INTC}</annotation></semantics></math>, <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="monospace">ğŸ¶ğš¡ğŸº</mtext><mo>â†’</mo><mtext mathvariant="monospace">ğ™¸ğ™½ğšƒğ™³</mtext></mrow><annotation encoding="application/x-tex">\texttt{0x4}\rightarrow \texttt{INTD}</annotation></semantics></math></td>
</tr>
<tr class="odd">
<td style="text-align: center;">0x3e</td>
<td style="text-align: center;"><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>1</mn><annotation encoding="application/x-tex">1</annotation></semantics></math></td>
<td style="text-align: center;">Min Grant</td>
<td style="text-align: left;">ç”¨äº PCI ï¼ŒPCIe ä¸‹ä¸å¯ç”¨ï¼Œå›ºå®šä¸º <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>0</mn><annotation encoding="application/x-tex">0</annotation></semantics></math></td>
</tr>
<tr class="even">
<td style="text-align: center;">0x3f</td>
<td style="text-align: center;"><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>1</mn><annotation encoding="application/x-tex">1</annotation></semantics></math></td>
<td style="text-align: center;">Max Latency</td>
<td style="text-align: left;">ç”¨äº PCI ï¼ŒPCIe ä¸‹ä¸å¯ç”¨ï¼Œå›ºå®šä¸º <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>0</mn><annotation encoding="application/x-tex">0</annotation></semantics></math></td>
</tr>
</tbody>
</table>
<p><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtext mathvariant="normal">Class Id, subClass, Prog IF</mtext><annotation encoding="application/x-tex">\text{Class Id, subClass, Prog IF}</annotation></semantics></math> ä¸‰è€…å…±åŒç¡®è®¤ä¸€ä¸ªè®¾å¤‡çš„ç±»åˆ«ï¼Œç½‘ä¸Šæœ‰å¯¹ç…§è¡¨ï¼Œè¿™é‡Œå°±ä¸ç²˜å‡ºæ¥äº†ã€‚å¯¹äº XHCI è®¾å¤‡ï¼Œ<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="normal">Class Id</mtext><mo>=</mo><mtext mathvariant="monospace">ğŸ¶ğš¡ğ™²</mtext><mo>,</mo><mtext mathvariant="normal">Subclass</mtext><mo>=</mo><mtext mathvariant="monospace">ğŸ¶ğš¡ğŸ¹</mtext><mo>,</mo><mtext mathvariant="normal">Prog IF</mtext><mo>=</mo><mtext mathvariant="monospace">ğŸ¶ğš¡ğŸ¹ğŸ¶</mtext></mrow><annotation encoding="application/x-tex">\text{Class Id}=\texttt{0xC}, \text{Subclass}=\texttt{0x3}, \text{Prog IF}=\texttt{0x30}</annotation></semantics></math></p>
<h3 id="header-type-ç»“æ„">Header Type ç»“æ„</h3>
<table>
<thead>
<tr class="header">
<th style="text-align: center;">Bit 7</th>
<th style="text-align: center;">Bit 0 : 6</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">è¯¥è®¾å¤‡æ˜¯(1)/å¦(0)ä¸ºå¤šåŠŸèƒ½(multi-function)è®¾å¤‡</td>
<td style="text-align: center;">è¡¨å¤´å‰©ä½™ç»“æ„çš„ç±»å‹</td>
</tr>
</tbody>
</table>
<p>å¯¹äº Bit <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn><mo>:</mo><mn>6</mn></mrow><annotation encoding="application/x-tex">0:6</annotation></semantics></math> ï¼Œåªæœ‰ <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="monospace">ğŸ¶ğš¡ğŸ¶</mtext><mo>,</mo><mtext mathvariant="monospace">ğŸ¶ğš¡ğŸ·</mtext><mo>,</mo><mtext mathvariant="monospace">ğŸ¶ğš¡ğŸ¸</mtext></mrow><annotation encoding="application/x-tex">\texttt{0x0},\texttt{0x1},\texttt{0x2}</annotation></semantics></math> ä¸‰ç§å–å€¼ï¼Œåˆ†åˆ«è¡¨ç¤ºè¯¥ PCIe è®¾å¤‡æ˜¯ä¸€ä¸ª General Device, PCI-to-PCI bridge, PCI-to-Cardbus bridge ï¼Œå¯¹äº XHCI è®¾å¤‡ï¼Œå…¶ <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtext mathvariant="normal">Header Type</mtext><annotation encoding="application/x-tex">\text{Header Type}</annotation></semantics></math> å€¼ä¸€å®šä¸º <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtext mathvariant="monospace">ğŸ¶ğš¡ğŸ¶</mtext><annotation encoding="application/x-tex">\texttt{0x0}</annotation></semantics></math> æˆ– <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtext mathvariant="monospace">ğŸ¶ğš¡ğŸ¾ğŸ¶</mtext><annotation encoding="application/x-tex">\texttt{0x80}</annotation></semantics></math> ã€‚è€Œä¸Šè¿°å±•ç¤ºçš„PCIeè¡¨ç»“æ„å°±æ˜¯ Bit <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn><mo>:</mo><mn>6</mn><mo>=</mo><mtext mathvariant="monospace">ğŸ¶ğš¡ğŸ¶</mtext></mrow><annotation encoding="application/x-tex">0:6=\texttt{0x0}</annotation></semantics></math> æ—¶çš„ç»“æ„ï¼Œå¯¹äºå…¶ä»–æƒ…å†µï¼Œå¯ä»¥å‚è€ƒ <a href="https://wiki.osdev.org/PCI">PCI on OS Dev</a> ã€‚</p>
<h2 id="capability-registers">Capability Registers</h2>
<p>å¯ä»¥ç¿»è¯‘ä¸ºä½¿èƒ½å¯„å­˜å™¨ç»„ï¼Œè¿™äº›å¯„å­˜å™¨å‡ä¸ºåªè¯»(RO)å¯„å­˜å™¨ã€‚å­˜å‚¨äº†å¤§é‡çš„æ§åˆ¶å™¨æ”¯æŒä¿¡æ¯ã€‚å…¶åŸºåœ°å€å¯ä»¥ä½¿ç”¨ <code>PCIeConfig</code> çš„ <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="normal">bar0</mtext><mo>,</mo><mtext mathvariant="normal">bar1</mtext></mrow><annotation encoding="application/x-tex">\text{bar0}, \text{bar1}</annotation></semantics></math> ç»„åˆè·å–ï¼Œè®¡ç®—æ–¹å¼å¦‚ä¸‹ï¼š</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true"></a><span class="co">// å°†ä¸¤ä¸ªåœ°å€çš„å€¼æ‹¼æ¥èµ·æ¥ï¼Œç„¶åå¯¹ 4K ä¸‹å–æ•´å¯¹é½</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true"></a>addr=(bar0 | (bar1 &lt;&lt; <span class="dv">32</span>)) &amp; (~((<span class="dv">1</span> &lt;&lt; <span class="dv">12</span>) - <span class="dv">1</span>))</span></code></pre></div>
<p>è¿™ä¸ª <code>addr</code> å¯ä»¥è®°å½•ä¸º <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtext mathvariant="normal">baseAddr</mtext><annotation encoding="application/x-tex">\text{baseAddr}</annotation></semantics></math> ï¼Œç¨åä¾ç„¶ä¼šç”¨åˆ°ã€‚æ¥ä¸‹æ¥ç›´æ¥åˆ—å‡ºè¿™äº›å¯„å­˜å™¨çš„ä¿¡æ¯ï¼š</p>
<table>
<thead>
<tr class="header">
<th style="text-align: center;">Offset</th>
<th style="text-align: center;">Size(Byte)</th>
<th style="text-align: center;">Name</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">0x0</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">CapLen</td>
<td style="text-align: left;">ä½¿èƒ½å¯„å­˜å™¨ç»„çš„å¤§å°</td>
</tr>
<tr class="even">
<td style="text-align: center;">0x1</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">RSVD</td>
<td style="text-align: left;">ä¿ç•™</td>
</tr>
<tr class="odd">
<td style="text-align: center;">0x2</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">hciVersion</td>
<td style="text-align: left;">æ¥å£çš„ç‰ˆæœ¬æ•°å­—ï¼Œä¸éœ€è¦å…³æ³¨</td>
</tr>
<tr class="even">
<td style="text-align: center;">0x4</td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">hcsParams1</td>
<td style="text-align: left;">ç»“æ„åŒ–çš„å‚æ•°ç»„ #1</td>
</tr>
<tr class="odd">
<td style="text-align: center;">0x8</td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">hcsParams2</td>
<td style="text-align: left;">ç»“æ„åŒ–çš„å‚æ•°ç»„ #2</td>
</tr>
<tr class="even">
<td style="text-align: center;">0xc</td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">hcsParams3</td>
<td style="text-align: left;">ç»“æ„åŒ–çš„å‚æ•°ç»„ #3</td>
</tr>
<tr class="odd">
<td style="text-align: center;">0x10</td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">hccParams1</td>
<td style="text-align: left;">ä½¿èƒ½å‚æ•°ç»„ #1</td>
</tr>
<tr class="even">
<td style="text-align: center;">0x14</td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">dbOff</td>
<td style="text-align: left;">Doorbell å¯„å­˜å™¨ç»„çš„åç§»ï¼Œå¯¹ <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>4</mn><annotation encoding="application/x-tex">4</annotation></semantics></math> å¯¹é½ï¼ˆç›¸å¯¹äº <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtext mathvariant="normal">baseAddr</mtext><annotation encoding="application/x-tex">\text{baseAddr}</annotation></semantics></math>ï¼‰</td>
</tr>
<tr class="odd">
<td style="text-align: center;">0x18</td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">rtsOff</td>
<td style="text-align: left;">è¿è¡Œæ—¶å¯„å­˜å™¨ç©ºé—´çš„åç§»ï¼Œå¯¹ <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>64</mn><annotation encoding="application/x-tex">64</annotation></semantics></math> å¯¹é½ï¼ˆç›¸å¯¹äº <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtext mathvariant="normal">baseAddr</mtext><annotation encoding="application/x-tex">\text{baseAddr}</annotation></semantics></math>ï¼‰</td>
</tr>
<tr class="even">
<td style="text-align: center;">0x1c</td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">hccParams2</td>
<td style="text-align: left;">ä½¿èƒ½å‚æ•°ç»„ #2</td>
</tr>
</tbody>
</table>
<p>ä¸Šé¢çš„è¡¨ä¸­æåˆ°äº†äº”ä¸ªå‚æ•°ç»„ï¼Œå®é™…ä¸Šå°±æ˜¯å°†ä¸€äº›å€¼æ¯”è¾ƒå°çš„ä¿¡æ¯æ‹¼æ¥èµ·æ¥ï¼ŒèŠ‚çœç©ºé—´ï¼Œæ¥ä¸‹æ¥ç»™å‡ºæ¯ä¸ªå‚æ•°ç»„çš„å…·ä½“å†…å®¹ã€‚</p>
<h3 id="hcsparams-1-ç»“æ„åŒ–çš„å‚æ•°ç»„-1">hcsParams 1, ç»“æ„åŒ–çš„å‚æ•°ç»„ #1</h3>
<table>
<thead>
<tr class="header">
<th style="text-align: center;">Bit</th>
<th style="text-align: center;">Name</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">0:7</td>
<td style="text-align: center;">MaxSlots</td>
<td style="text-align: left;">æœ€å¤§æ’æ§½çš„ç¼–å·</td>
</tr>
<tr class="even">
<td style="text-align: center;">8:18</td>
<td style="text-align: center;">MaxIntrs</td>
<td style="text-align: left;">æœ€å¤§çš„ä¸­æ–­ç¼–å·</td>
</tr>
<tr class="odd">
<td style="text-align: center;">19:23</td>
<td style="text-align: center;">Reserved</td>
<td style="text-align: left;">ä¿ç•™</td>
</tr>
<tr class="even">
<td style="text-align: center;">24:31</td>
<td style="text-align: center;">MaxPorts</td>
<td style="text-align: left;">æœ€å¤§ç«¯å£çš„ç¼–å·</td>
</tr>
</tbody>
</table>
<p>è¿™ä¸‰ä¸ªæœ€å¤§å€¼å¯ä»¥ç”¨äºæšä¸¾ç«¯å£å’Œä¸­æ–­ï¼Œä½†æ³¨æ„ï¼Œå¯ç”¨çš„ç«¯å£å’Œé€‰æ‹©ä½¿ç”¨çš„ä¸­æ–­å¯èƒ½å¹¶ä¸è¿ç»­ã€‚</p>
<h3 id="hcsparams-2-ç»“æ„åŒ–çš„å‚æ•°ç»„-2">hcsParams 2, ç»“æ„åŒ–çš„å‚æ•°ç»„ #2</h3>
<table>
<colgroup>
<col style="width: 24%" />
<col style="width: 40%" />
<col style="width: 36%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">Bit</th>
<th style="text-align: center;">Name</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">0:3</td>
<td style="text-align: center;">Isochronous Scheduling Threshold (IST)</td>
<td style="text-align: left;">å‘Šè¯‰è½¯ä»¶å®ƒå¯ä»¥åœ¨å¤šè¿œçš„å¸§ä¸­ä¿®æ”¹ TRBï¼ˆä¼ è¾“è¯·æ±‚å—ï¼‰å¹¶ä¸”ä»èƒ½æ­£ç¡®æ‰§è¡Œ</td>
</tr>
<tr class="even">
<td style="text-align: center;">4:7</td>
<td style="text-align: center;">Event Ring Segment Table Max (ERST Max)</td>
<td style="text-align: left;">Event Ring Segment Table Base Size registers (ç¨åä¼šæœ‰è§£é‡Š) å¯ä»¥æ”¯æŒçš„æœ€å¤§å€¼</td>
</tr>
<tr class="odd">
<td style="text-align: center;">8:20</td>
<td style="text-align: center;">Reserved</td>
<td style="text-align: left;">ä¿ç•™</td>
</tr>
<tr class="even">
<td style="text-align: center;">21:25</td>
<td style="text-align: center;">Max Scractchpad Buffer (High 5 bits)</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: center;">26</td>
<td style="text-align: center;">Scratchpad Restore (SPR)</td>
<td style="text-align: left;">è¡¨ç¤ºæ˜¯å¦æ”¯æŒæš‚å­˜å™¨ä¿å­˜/æ¢å¤ç¼“å†²åŒº</td>
</tr>
<tr class="even">
<td style="text-align: center;">27:31</td>
<td style="text-align: center;">Max Scractchpad Buffer (Low 5 bits)</td>
<td style="text-align: left;"></td>
</tr>
</tbody>
</table>
<p>å°† Max Scractchpad Buffer æ‹¼æ¥èµ·æ¥å¯ä»¥å¾—åˆ°è½¯ä»¶éœ€è¦ç”³è¯·çš„ç”¨äºæš‚å­˜å™¨ç¼“å†²åŒºçš„å†…å®¹å¤§å°ï¼Œå¦‚æœè¯¥å€¼ä¸º <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>0</mn><annotation encoding="application/x-tex">0</annotation></semantics></math> ï¼Œé‚£ä¹ˆå°±ä¸éœ€è¦ç”³è¯·å†…å®¹ï¼Œæ›´å¤šè¦æ±‚åˆ™å’Œæ¥ä¸‹æ¥æåˆ°çš„pageSizeçš„å€¼æœ‰å…³ï¼Œä½†æ˜¯åœ¨æœ¬äººçš„æœºå­ä¸Šï¼Œè¿™ä¸ªå€¼éƒ½æ˜¯ <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>0</mn><annotation encoding="application/x-tex">0</annotation></semantics></math>ã€‚</p>
<h3 id="hcsparams-3-ç»“æ„åŒ–çš„å‚æ•°ç»„-3">hcsParams 3, ç»“æ„åŒ–çš„å‚æ•°ç»„ #3</h3>
<table>
<thead>
<tr class="header">
<th style="text-align: center;">Bit</th>
<th style="text-align: center;">Name</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">0:7</td>
<td style="text-align: center;">U1 Device Exit Latency</td>
<td style="text-align: left;">ç”µæºçŠ¶æ€ä» U1 åˆ° U0 æ‰€éœ€è¦çš„å¾®ç§’æ•° (<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>10</mn><mrow><mo>âˆ’</mo><mn>6</mn></mrow></msup><mi>s</mi><mo>=</mo><mn>1</mn><mi>Î¼</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">10^{-6}s=1\mu s</annotation></semantics></math>)</td>
</tr>
<tr class="even">
<td style="text-align: center;">8:15</td>
<td style="text-align: center;">Reserved</td>
<td style="text-align: left;">ä¿ç•™</td>
</tr>
<tr class="odd">
<td style="text-align: center;">16:31</td>
<td style="text-align: center;">U2 Device Exit Latency</td>
<td style="text-align: left;">ç”µæºçŠ¶æ€ä» U1 åˆ° U0 æ‰€éœ€è¦çš„å¾®ç§’æ•°</td>
</tr>
</tbody>
</table>
<h3 id="hccparams-1-ä½¿èƒ½å‚æ•°ç»„-1">hccParams 1, ä½¿èƒ½å‚æ•°ç»„ #1</h3>
<table>
<colgroup>
<col style="width: 24%" />
<col style="width: 40%" />
<col style="width: 36%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">Bit</th>
<th style="text-align: center;">Name</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">0</td>
<td style="text-align: center;">64-bit Addressing Capability (AC64)</td>
<td style="text-align: left;">è¯¥XHCIæ§åˆ¶å™¨æ˜¯(1)å¦(0)å¯ä»¥ä½¿ç”¨64-bitåœ°å€ï¼Œå¦‚æœä¸èƒ½ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥ä½¿ç”¨çš„æ‰€æœ‰åœ°å€ï¼Œéƒ½ä¼šå¿½ç•¥é«˜32ä½ã€‚</td>
</tr>
<tr class="even">
<td style="text-align: center;">1</td>
<td style="text-align: center;">BW Negotiation Capability (BNC)</td>
<td style="text-align: left;">ç”¨äºæŒ‡ç¤ºè¯¥æ§åˆ¶å™¨æ˜¯(1)å¦(0)å®ç°äº† Bandwidth Negotiation</td>
</tr>
<tr class="odd">
<td style="text-align: center;">2</td>
<td style="text-align: center;">Context Size (CSZ)</td>
<td style="text-align: left;">æŒ‡ç¤ºä¸Šä¸‹æ–‡çš„å¤§å° 1: 64-byte; 0: 32-byte ã€‚è¯¥ä½å¯¹ Stream Contexts ä¸ç”Ÿæ•ˆã€‚</td>
</tr>
<tr class="even">
<td style="text-align: center;">3</td>
<td style="text-align: center;">Port Power Control (PPC)</td>
<td style="text-align: left;">1: æ‰€æœ‰çš„ç«¯å£æ°¸è¿œå¤„äºé€šç”µçŠ¶æ€ï¼›0: æ¯ä¸ªç«¯å£å¯ä»¥è‡ªè¡Œæ§åˆ¶ä¾›ç”µçŠ¶æ€</td>
</tr>
<tr class="odd">
<td style="text-align: center;">4</td>
<td style="text-align: center;">Port Indicators (PIND)</td>
<td style="text-align: left;">ç”¨äºæŒ‡ç¤ºç«¯å£æŒ‡ç¤ºç¯çš„æ§åˆ¶ã€‚0: æ§åˆ¶ä¸å¯ç”¨; 1: å‚ç…§ç«¯å£å¯„å­˜å™¨çš„ Bit 14:15 æ¥è·å–æ›´å¤šä¿¡æ¯</td>
</tr>
<tr class="even">
<td style="text-align: center;">5</td>
<td style="text-align: center;">Light HC Reset Capability (LHRC)</td>
<td style="text-align: left;">æŒ‡ç¤ºæ“ä½œå¯„å­˜å™¨ç»„ä¸­çš„ <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtext mathvariant="normal">usbCmd</mtext><annotation encoding="application/x-tex">\text{usbCmd}</annotation></semantics></math> å¯„å­˜å™¨çš„ Light Host Controller åŠŸèƒ½æ˜¯(1)å¦(0)å¯ç”¨</td>
</tr>
<tr class="odd">
<td style="text-align: center;">6</td>
<td style="text-align: center;">Latency Tolerance Messaging Capability (LTC)</td>
<td style="text-align: left;">è¡¨ç¤ºè¯¥æ§åˆ¶å™¨æ˜¯(1)å¦(0)æ”¯æŒä¼ é€’å»¶è¿Ÿå®¹å¿æ¶ˆæ¯(Latency Tolerance Messageing, LTM)</td>
</tr>
<tr class="even">
<td style="text-align: center;">7</td>
<td style="text-align: center;">No Secondary SID Support (NSS)</td>
<td style="text-align: left;"><strong>æ˜¯(0)å¦(1)</strong> æ”¯æŒ Secondary Stream IDs.</td>
</tr>
<tr class="odd">
<td style="text-align: center;">8</td>
<td style="text-align: center;">Parse All Event Data (PAE)</td>
<td style="text-align: left;">1: å½“è½¬ç§»åˆ°ä¸‹ä¸€ä¸ªä¼ è¾“æè¿°ç¬¦çš„æ—¶å€™ï¼Œæ‰€æœ‰çš„ TRB éƒ½ä¼šè¢«è§£æï¼›0: ä¸ä¼šã€‚æ£€æµ‹åˆ°ä¸€ä¸ª Short Packet çš„æ—¶å€™ä¼šä½¿ç”¨è¿™ä¸ªä½</td>
</tr>
<tr class="even">
<td style="text-align: center;">9</td>
<td style="text-align: center;">Stopped - Short Packet Capability (SPC)</td>
<td style="text-align: left;">è¯¥æ§åˆ¶å™¨æ˜¯(1)å¦(0)å¯ä»¥å‘å‡ºçŸ­æ•°æ®åŒ…åœæ­¢ä»£ç (Stopped-Short Packet Completion code)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">10</td>
<td style="text-align: center;">Stopped EDTLA Capability (SEC)</td>
<td style="text-align: left;">è¯¥æ§åˆ¶å™¨æ˜¯(1)å¦(0)åœ¨ Stream Context ä¸­å®ç°äº† Stopped EDTLA åŒºåŸŸï¼Œå¯¹äºè¾ƒæ–°çš„ç¡¬ä»¶ï¼Œè¿™ä¸€ä½éƒ½æ˜¯ <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>1</mn><annotation encoding="application/x-tex">1</annotation></semantics></math>ã€‚</td>
</tr>
<tr class="even">
<td style="text-align: center;">11</td>
<td style="text-align: center;">Continuous Frame ID Capability (CFC)</td>
<td style="text-align: left;">è¯¥æ§åˆ¶å™¨æ˜¯(1)å¦(0)èƒ½å¤ŸåŒ¹é…è¿ç»­ ISO ä¼ è¾“æè¿°ç¬¦çš„ IDã€‚</td>
</tr>
<tr class="odd">
<td style="text-align: center;">12:15</td>
<td style="text-align: center;">Maximum Primary Stream Array Size (MaxPSASize)</td>
<td style="text-align: left;">å…è®¸çš„æœ€å¤§ Stream Array å¤§å°</td>
</tr>
<tr class="even">
<td style="text-align: center;">16:31</td>
<td style="text-align: center;">XHCI Extended Capabilities Pointer (xECP)</td>
<td style="text-align: left;">0: è¯¥æ§åˆ¶å™¨ä¸å­˜åœ¨æ‹“å±•ä½¿èƒ½æè¿°; <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>&gt;</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">&gt;0</annotation></semantics></math>: æ‹“å±•ä½¿èƒ½æè¿°çš„åç§»ï¼ˆç›¸å¯¹äº <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtext mathvariant="normal">baseAddr</mtext><annotation encoding="application/x-tex">\text{baseAddr}</annotation></semantics></math> ï¼‰</td>
</tr>
</tbody>
</table>
<p>å®é™…ä¸Šçš„ Stream Array æœ€å¤§å¤§å°éœ€è¦ä½¿ç”¨å¦‚ä¸‹æ–¹å¼è®¡ç®— :</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="normal">maxSize</mtext><mo>=</mo><msup><mn>2</mn><mrow><mtext mathvariant="normal">MaxPSASize</mtext><mo>+</mo><mn>1</mn></mrow></msup></mrow><annotation encoding="application/x-tex">
\text{maxSize}=2^{\text{MaxPSASize}+1}
</annotation></semantics></math></p>
<p>å¯¹äºæ‹“å±•æ—¶èƒ½æè¿°çš„åç§»å®é™…ä¸Šæ˜¯ï¼š</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="normal">offset of extended Capabilites</mtext><mo>=</mo><mtext mathvariant="normal">baseAddr</mtext><mo>+</mo><mn>4</mn><mo>Ã—</mo><mtext mathvariant="normal">xECP</mtext></mrow><annotation encoding="application/x-tex">
\text{offset of extended Capabilites}=\text{baseAddr} + 4\times \text{xECP}
</annotation></semantics></math></p>
<h3 id="hccparams-2-ä½¿èƒ½å‚æ•°ç»„-2">hccParams 2, ä½¿èƒ½å‚æ•°ç»„ #2</h3>
<table>
<colgroup>
<col style="width: 24%" />
<col style="width: 40%" />
<col style="width: 36%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">Bit</th>
<th style="text-align: center;">Name</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">0</td>
<td style="text-align: center;">U3 Entry Capability</td>
<td style="text-align: left;">æ ¹(root hub)æ˜¯å¦æ”¯æŒæš‚åœå®Œæˆé€šçŸ¥(Suspend Completion notification)</td>
</tr>
<tr class="even">
<td style="text-align: center;">1</td>
<td style="text-align: center;">ConfigEP Command Max Exit Latency too Large (CMC)</td>
<td style="text-align: left;">æ˜¯(1)å¦(0)å¯ä»¥ç”Ÿæˆæœ€å¤§é€€å‡ºæ½œä¼æœŸè¿‡é•¿çš„å…¼å®¹é”™è¯¯(Exit Latency too Large compatibility error)ï¼Œè¯¥ä½è¢«æ“ä½œå¯„å­˜å™¨çš„ <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtext mathvariant="normal">usbCmd</mtext><annotation encoding="application/x-tex">\text{usbCmd}</annotation></semantics></math> çš„ CME ä½ä½¿ç”¨ã€‚</td>
</tr>
<tr class="odd">
<td style="text-align: center;">2</td>
<td style="text-align: center;">Force Save Context Capability (FSC)</td>
<td style="text-align: left;">Save Stateå‘½ä»¤æ˜¯(1)å¦(0)åº”å½“å°†æ‰€æœ‰çš„cached Slot, End Point, Streamå’Œå…¶ä»–ä¸Šä¸‹æ–‡å­˜å‚¨åˆ°å†…å­˜ä¸­</td>
</tr>
<tr class="even">
<td style="text-align: center;">3</td>
<td style="text-align: center;">Compliance Transition Capability (CTC)</td>
<td style="text-align: left;">è¯¥æ§åˆ¶å™¨æ˜¯(1)å¦(0) æ”¯æŒ Compliance Transition Enabled ä½</td>
</tr>
<tr class="odd">
<td style="text-align: center;">4</td>
<td style="text-align: center;">Large ESIT Payload Capability (LEC)</td>
<td style="text-align: left;">æ˜¯(1)å¦(0)æ”¯æŒå¤§äº <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>48</mn><mtext mathvariant="monospace">ğ™ºğš‹</mtext></mrow><annotation encoding="application/x-tex">48\texttt{Kb}</annotation></semantics></math> çš„ ESIT Payloads</td>
</tr>
<tr class="even">
<td style="text-align: center;">5</td>
<td style="text-align: center;">Configuration Information Capability</td>
<td style="text-align: left;">æ˜¯(1)å¦(0)æ”¯æŒ è¾“å…¥æ§åˆ¶ä¸Šä¸‹æ–‡å—(Input Control Context block) ä¸­çš„ Configuration Value, Interface Number å’Œ Alternate settings åŸŸçš„æ‹“å±•é…ç½®ä¿¡æ¯</td>
</tr>
</tbody>
</table>
<h2 id="extended-capabilites-list">Extended Capabilites List</h2>
<p>é™¤äº†ä¸Šé¢çš„ Capability Registersï¼ŒXHCI è¿˜æä¾›äº†é“¾è¡¨ç»“æ„çš„æ‹“å±•ä½¿èƒ½åˆ—è¡¨ï¼Œå’Œ PCIe éå¸¸ç±»ä¼¼ã€‚æ¯ä¸ªæ‹“å±•æè¿°ç¬¦éƒ½é•¿ä¸‹é¢è¿™æ ·ï¼š</p>
<table>
<colgroup>
<col style="width: 24%" />
<col style="width: 40%" />
<col style="width: 36%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">Bit</th>
<th style="text-align: center;">Name</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">0:7</td>
<td style="text-align: center;">ID</td>
<td style="text-align: left;">RO, è¯¥æ‹“å±•æè¿°ç¬¦çš„ ID</td>
</tr>
<tr class="even">
<td style="text-align: center;">8:15</td>
<td style="text-align: center;">Next</td>
<td style="text-align: left;">RO, ä¸‹ä¸€ä¸ªæ‹“å±•æè¿°ç¬¦ç›¸å¯¹äºå½“å‰æè¿°ç¬¦çš„åç§»ï¼Œè®¡ç®—æ–¹å¼å¦‚ä¸‹ï¼š<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="normal">next offset</mtext><mo>=</mo><mtext mathvariant="normal">current offset</mtext><mo>+</mo><mn>4</mn><mo>Ã—</mo><mtext mathvariant="normal">Next</mtext></mrow><annotation encoding="application/x-tex">\text{next offset}=\text{current offset} + 4\times \text{Next}</annotation></semantics></math></td>
</tr>
<tr class="odd">
<td style="text-align: center;">n</td>
<td style="text-align: center;">Varies</td>
<td style="text-align: left;">æ¯ä¸ª <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtext mathvariant="normal">ID</mtext><annotation encoding="application/x-tex">\text{ID}</annotation></semantics></math> ç‰¹å®šçš„å†…å®¹</td>
</tr>
</tbody>
</table>
<p>ä¸‹é¢ç»™å‡ºä¸€äº›å¸¸ç”¨çš„ <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtext mathvariant="normal">ID</mtext><annotation encoding="application/x-tex">\text{ID}</annotation></semantics></math> å¯¹ç…§è¡¨ï¼š</p>
<table style="width:100%;">
<colgroup>
<col style="width: 20%" />
<col style="width: 33%" />
<col style="width: 30%" />
<col style="width: 16%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">ID</th>
<th style="text-align: center;">Name</th>
<th style="text-align: left;">Description</th>
<th style="text-align: center;">Size(Byte)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">0</td>
<td style="text-align: center;">Reserved</td>
<td style="text-align: left;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: center;">1</td>
<td style="text-align: center;">USB Legacy Support</td>
<td style="text-align: left;">æä¾›æ“ä½œç³»ç»Ÿå¯åŠ¨å‰ï¼Œæ—¢UEFIæˆ–BIOSçš„æ”¯æŒã€‚å¦‚æœè¿™ä¸ªæ‹“å±•æè¿°ç¬¦æ˜¯ USB Legacy Supportï¼Œé‚£ä¹ˆå®ƒä¸€å®šæ˜¯ç¬¬ä¸€ä¸ªæ‹“å±•æè¿°ç¬¦ã€‚(ä¹¦ä¸Šæ˜¯è¿™ä¹ˆè¯´çš„ï¼Œä½†æ˜¯è²Œä¼¼å¹¶ä¸æ˜¯è¿™æ ·çš„)</td>
<td style="text-align: center;">8</td>
</tr>
<tr class="odd">
<td style="text-align: center;">2</td>
<td style="text-align: center;">Supported Protocol</td>
<td style="text-align: left;">è¯¥æ§åˆ¶å™¨æ”¯æŒçš„å…¶ä¸­ä¸€ç§åè®®ï¼Œæ¯ä¸ªæ§åˆ¶å™¨è‡³å°‘æœ‰ä¸€ä¸ªè¿™ç§æ‹“å±•æè¿°ç¬¦ï¼Œå¹¶ä¸”å¯èƒ½æœ‰å¤šä¸ªã€‚</td>
<td style="text-align: center;">16</td>
</tr>
<tr class="even">
<td style="text-align: center;">3</td>
<td style="text-align: center;">Extened Power Management</td>
<td style="text-align: left;">æ‹“å±•çš„ç”µæºç®¡ç†ï¼Œè‡³å°‘æœ‰ä¸€ä¸ªã€‚</td>
<td style="text-align: center;">n</td>
</tr>
<tr class="odd">
<td style="text-align: center;">4</td>
<td style="text-align: center;">I/O Virtualization</td>
<td style="text-align: left;">ç¡¬ä»¶è™šæ‹ŸåŒ–æ”¯æŒ</td>
<td style="text-align: center;">æœ€é«˜ 1280</td>
</tr>
<tr class="even">
<td style="text-align: center;">5</td>
<td style="text-align: center;">Message Interrupt</td>
<td style="text-align: left;">ä¿¡æ¯ä¸­æ–­çš„æ”¯æŒ</td>
<td style="text-align: center;">n</td>
</tr>
<tr class="odd">
<td style="text-align: center;">6</td>
<td style="text-align: center;">Local Memory</td>
<td style="text-align: left;">æœ¬åœ°å†…å­˜æ”¯æŒ</td>
<td style="text-align: center;">æœ€é«˜ <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>4</mn><mtext mathvariant="monospace">ğšƒğ™±</mtext></mrow><annotation encoding="application/x-tex">4\texttt{TB}</annotation></semantics></math></td>
</tr>
<tr class="even">
<td style="text-align: center;">7-9</td>
<td style="text-align: center;">Reserved</td>
<td style="text-align: left;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: center;">10</td>
<td style="text-align: center;">USB Debug Capability</td>
<td style="text-align: left;">è°ƒè¯•åŠŸèƒ½æ”¯æŒ</td>
<td style="text-align: center;">56</td>
</tr>
<tr class="even">
<td style="text-align: center;">11-16</td>
<td style="text-align: center;">Reserved</td>
<td style="text-align: left;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: center;">17</td>
<td style="text-align: center;">Extended Message Interrupt</td>
<td style="text-align: left;">æ‹“å±•çš„ä¿¡æ¯ä¸­æ–­çš„æ”¯æŒ</td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: center;">18-191</td>
<td style="text-align: center;">Reserved</td>
<td style="text-align: left;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: center;">192-255</td>
<td style="text-align: center;">Vendor Specific</td>
<td style="text-align: left;">ç‰¹å®šçš„Vendoræ‰€ä½¿ç”¨çš„æ‹“å±•ä½¿èƒ½ä¿¡æ¯</td>
<td style="text-align: center;"></td>
</tr>
</tbody>
</table>
<p>VMware è™šæ‹Ÿæœºçš„ XHCI æ§åˆ¶å™¨ä¼¼ä¹å¹¶ä¸å­˜åœ¨ USB Legacy Support æè¿°ç¬¦ã€‚</p>
<p>æ¯ä¸ªXHCIæ§åˆ¶å™¨ï¼Œè‡³å°‘æ‹¥æœ‰ä¸€ä¸ª Message Interrupt æˆ–è€… Extended Message Interrupt æè¿°ç¬¦ã€‚ä¸€èˆ¬è€Œè¨€ï¼Œæœ‰ Extended Message Interrupt åˆ™ä½¿ç”¨ Extend Message Interruptï¼Œå¦åˆ™ä½¿ç”¨ Message Interrupt ã€‚</p>
<h3 id="xhci-usb-legacy-support">XHCI USB Legacy Support</h3>
<p>æ•´ä¸€ä¸ªæè¿°ç¬¦å¯ä»¥ä½¿ç”¨ä¸€ä¸ª 64 ä½æ•´æ•°å­˜å‚¨ï¼Œä½†æ˜¯ä¸ºäº†ä¾¿äºå±•ç¤ºï¼Œå°†å…¶åˆ†æˆä¸¤ä¸ª 32 ä½æ•´æ•°ã€‚</p>
<p>å¯¹äºç¬¬ä¸€ä¸ªæ•´æ•°ï¼š</p>
<table>
<colgroup>
<col style="width: 24%" />
<col style="width: 40%" />
<col style="width: 36%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">Bit</th>
<th style="text-align: center;">Name</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">0:7</td>
<td style="text-align: center;">ID</td>
<td style="text-align: left;">RO, <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>=</mo><mtext mathvariant="monospace">ğŸ¶ğš¡ğŸ·</mtext></mrow><annotation encoding="application/x-tex">=\texttt{0x1}</annotation></semantics></math></td>
</tr>
<tr class="even">
<td style="text-align: center;">8:15</td>
<td style="text-align: center;">Next</td>
<td style="text-align: left;">RO</td>
</tr>
<tr class="odd">
<td style="text-align: center;">16</td>
<td style="text-align: center;">HC BIOS Owned Semaphore</td>
<td style="text-align: left;">R/W, <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="normal">Default</mtext><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">\text{Default}=0</annotation></semantics></math>. BIOS å°†æ­¤ä½è®¾ç½®ä¸º <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>1</mn><annotation encoding="application/x-tex">1</annotation></semantics></math> æ¥æŒ‡ç¤º BIOS å ç”¨äº†è¯¥æ§åˆ¶å™¨ã€‚</td>
</tr>
<tr class="even">
<td style="text-align: center;">17:23</td>
<td style="text-align: center;">Reserved and preserved</td>
<td style="text-align: left;">R/W</td>
</tr>
<tr class="odd">
<td style="text-align: center;">24</td>
<td style="text-align: center;">System Software Owned Semaphore</td>
<td style="text-align: left;">R/W, <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="normal">Default</mtext><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">\text{Default}=0</annotation></semantics></math>ï¼Œæ“ä½œç³»ç»Ÿå°†æ­¤ä½è®¾ç½®ä¸º <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>1</mn><annotation encoding="application/x-tex">1</annotation></semantics></math> æ¥è·å–è¿™ä¸ªæ§åˆ¶å™¨çš„æ‰€æœ‰æƒï¼Œè®¾ç½®ä¹‹åï¼Œå¾…åˆ° Bit 16 å˜ä¸º <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>0</mn><annotation encoding="application/x-tex">0</annotation></semantics></math> å³è¡¨ç¤ºæ‰€æœ‰æƒè·å–æˆåŠŸ</td>
</tr>
<tr class="even">
<td style="text-align: center;">25:31</td>
<td style="text-align: center;">Reserved and preserved</td>
<td style="text-align: left;">R/W</td>
</tr>
</tbody>
</table>
<p>å¯¹äºè¦æ±‚ Reserved and preserved çš„ä½ç½®ï¼Œéœ€è¦æ¯æ¬¡å†™å…¥çš„ä¹‹å‰å…ˆæŠŠè¿™äº›Bitçš„å€¼è¯»å‡ºæ¥ï¼Œæˆ–ä¸Šè¦å†™å…¥çš„å…¶ä»–ä½ç½®çš„å€¼ï¼Œç„¶åå†å°†æ•´ä¸ªæ•´æ•°å†™å…¥ã€‚</p>
<p>ç¬¬äºŒä¸ªæ•´æ•°çš„å€¼è¢« BIOS ä½¿ç”¨ï¼Œæ“ä½œç³»ç»Ÿè½¯ä»¶æ— éœ€å…³æ³¨ã€‚å¯¹äºè¿™ä¸ªæ‹“å±•æè¿°ç¬¦ï¼Œå”¯ä¸€è¦åšçš„å°±æ˜¯å°†ç¬¬ä¸€ä¸ªæ•´æ•°çš„ Bit 24 è®¾ç½®ä¸º <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>1</mn><annotation encoding="application/x-tex">1</annotation></semantics></math> ï¼Œç„¶åç­‰å¾… Bit 16 å˜ä¸ºé›¶å³å¯ã€‚</p>
<h3 id="xhci-usb-supported-protocol-capability">XHCI USB Supported Protocol Capability</h3>
<p>æœ¬æ‹“å±•æè¿°ç¬¦ç”¨äºæè¿°æ§åˆ¶å™¨æ”¯æŒçš„å…¶ä¸­ä¸€ç§åè®®ï¼Œä»¥åŠå¯¹åº”çš„ç«¯å£åºåˆ—ã€‚ç±»ä¼¼çš„ï¼Œæˆ‘ä»¬ç”¨ <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>4</mn><annotation encoding="application/x-tex">4</annotation></semantics></math> ä¸ª 32 ä½æ•´æ•°æè¿°è¿™ä¸ªæè¿°ç¬¦ï¼š</p>
<p>å¯¹äºç¬¬ä¸€ä¸ªæ•´æ•°ï¼š</p>
<table>
<thead>
<tr class="header">
<th style="text-align: center;">Bit</th>
<th style="text-align: center;">Access</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">0:15</td>
<td style="text-align: center;">RO</td>
<td style="text-align: left;">ID å’Œ Next</td>
</tr>
<tr class="even">
<td style="text-align: center;">16:23</td>
<td style="text-align: center;">RO</td>
<td style="text-align: left;">Minor Revision Number, â€œUSB 3.0â€ ä¸­çš„ 0</td>
</tr>
<tr class="odd">
<td style="text-align: center;">24:27</td>
<td style="text-align: center;">RO</td>
<td style="text-align: left;">Reserved</td>
</tr>
<tr class="even">
<td style="text-align: center;">28:31</td>
<td style="text-align: center;">RO</td>
<td style="text-align: left;">Major Revision Number, â€œUSB 3.0â€ ä¸­çš„ 3</td>
</tr>
</tbody>
</table>
<p>æ³¨æ„ï¼ŒMinor Revision Number å’Œ Major Revision Number å‡ä¸ºæ•´æ•°ï¼Œè€Œä¸æ˜¯å­—ç¬¦ ã€‚åœ¨VMware çš„ USB 3.1 æ§åˆ¶å™¨ä¸­ï¼Œå…¶ä¸­ä¸€ä¸ªæ‹“å±•æè¿°ç¬¦æœ‰ <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="normal">Major Revision Number</mtext><mo>=</mo><mn>3</mn></mrow><annotation encoding="application/x-tex">\text{Major Revision Number}=3</annotation></semantics></math>, <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="normal">Minor Revision Number</mtext><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">\text{Minor Revision Number}=1</annotation></semantics></math> ï¼Œè€Œå¦ä¸€ä¸ªæ‹“å±•æè¿°ç¬¦æœ‰ <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="normal">Major Revision Number</mtext><mo>=</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">\text{Major Revision Number}=2</annotation></semantics></math>, <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="normal">Minor Revision Number</mtext><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">\text{Minor Revision Number}=0</annotation></semantics></math> ï¼Œä¹Ÿå°±æ˜¯è¯´VMwareçš„XHCIæ”¯æŒ USB 3.1 å’Œ USB 2.0 ä¸¤ç§åè®®ã€‚</p>
<p>ç¬¬äºŒä¸ªæ•´æ•°å¯ä»¥è§†ä¸ºé•¿åº¦ä¸º <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>4</mn><annotation encoding="application/x-tex">4</annotation></semantics></math> çš„å­—ç¬¦ä¸²ï¼Œå…¶å€¼ä¸€å®šä¸º â€œUSBâ€ ã€‚</p>
<p>ç¬¬ä¸‰ä¸ªæ•´æ•°å­˜å‚¨äº†æ”¯æŒè¯¥åè®®çš„ç«¯å£ï¼Œ</p>
<table>
<colgroup>
<col style="width: 24%" />
<col style="width: 40%" />
<col style="width: 36%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">Bit</th>
<th style="text-align: center;">Access</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">0:7</td>
<td style="text-align: center;">RO</td>
<td style="text-align: left;">Compatible Port Offsetï¼Œå…¼å®¹è¯¥åè®®çš„ç«¯å£çš„åç§»ï¼Œä¹Ÿå°±æ˜¯ä»ç¬¬å‡ ä¸ªç«¯å£å¼€å§‹æ”¯æŒè¿™ç§åè®®</td>
</tr>
<tr class="even">
<td style="text-align: center;">8:15</td>
<td style="text-align: center;">RO</td>
<td style="text-align: left;">Compatible Port Countï¼Œå…¼å®¹è¯¥åè®®çš„ç«¯å£æ•°é‡</td>
</tr>
<tr class="odd">
<td style="text-align: center;">16:27</td>
<td style="text-align: center;">RO</td>
<td style="text-align: left;">Protocol Definedï¼Œå¯¹äº USB 3.0 ï¼Œè¯¥æ®µè¡¨ç¤º Hub Depthï¼›å¯¹äº USB 2.0ï¼ŒBit 17 è¡¨ç¤ºè¯¥æ§åˆ¶å™¨æ˜¯(1)å¦(0)åªæ”¯æŒé«˜é€Ÿè®¾å¤‡ï¼Œå‰©ä½™ä½ç”¨äºè¡¨ç¤º Hub Depthã€‚è¯¦ç»†å†…å®¹å¯ä»¥æŸ¥è¯¢ XHCI æŠ€æœ¯æ‰‹å†Œçš„ Section 7.2.2.1.3</td>
</tr>
<tr class="even">
<td style="text-align: center;">28:31</td>
<td style="text-align: center;">RO</td>
<td style="text-align: left;">Protocol Speed ID Countï¼Œ<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>&gt;</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">&gt;0</annotation></semantics></math>ï¼šè¡¨ç¤ºç”¨äºå®šä¹‰ è¢«è¯¥æ§åˆ¶å™¨æ”¯æŒçš„é€Ÿåº¦ç±»å‹ çš„ PSI ç»“æ„çš„ 32 ä½æ•´æ•°çš„ä¸ªæ•°ã€‚</td>
</tr>
</tbody>
</table>
<p>å¯¹äºç¬¬å››ä¸ªæ•´æ•°ï¼Œåªæœ‰ XHCI 1.1 æˆ–æ›´æ–°ç‰ˆæœ¬æ‰æœ‰å®šä¹‰ï¼Œå¦åˆ™æ‰€æœ‰ä½å‡ä¸º Reserved and preserved ã€‚</p>
<table>
<thead>
<tr class="header">
<th style="text-align: center;">Bit</th>
<th style="text-align: center;">Access</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">0ï¼š4</td>
<td style="text-align: center;">RO</td>
<td style="text-align: left;">Slot Type ï¼Œæ’æ§½ç±»å‹ï¼Œç›®å‰åªæ”¯æŒ <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>0</mn><annotation encoding="application/x-tex">0</annotation></semantics></math></td>
</tr>
<tr class="even">
<td style="text-align: center;">5:31</td>
<td style="text-align: center;">RO</td>
<td style="text-align: left;">Reserved and preserved</td>
</tr>
</tbody>
</table>
<h2 id="operational-registersæ“ä½œå¯„å­˜å™¨ç»„">Operational Registersï¼Œæ“ä½œå¯„å­˜å™¨ç»„</h2>
<p>è¿™ä¸€ç»„å¯„å­˜å™¨ç”¨äºæ•´ä¸ªæ§åˆ¶å™¨çš„æ“ä½œï¼ŒåŒ…æ‹¬é‡ç½®ï¼Œä¸Šç”µ/æ–­ç”µç­‰ç­‰ã€‚å¯ä»¥ä½¿ç”¨ <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="normal">opRegAddr</mtext><mo>=</mo><mtext mathvariant="normal">baseAddr</mtext><mo>+</mo><mtext mathvariant="normal">capReg</mtext><mi>.</mi><mtext mathvariant="normal">capLen</mtext></mrow><annotation encoding="application/x-tex">\text{opRegAddr}=\text{baseAddr}+\text{capReg}.\text{capLen}</annotation></semantics></math> è·å–è¿™ç»„å¯„å­˜å™¨çš„åœ°å€ã€‚è‹¥å¯„å­˜å™¨ä¸º 32 ä½ï¼Œé‚£ä¹ˆåªèƒ½ç”¨è¯»å†™ 32 ä½æ•´æ•°çš„æ–¹æ³•å¯¹å…¶æ“ä½œï¼›åªå¯ä»¥ä½¿ç”¨ 64 ä½æ•´æ•°çš„æ“ä½œæ–¹æ³•å¯¹ 64 ä½å¯„å­˜å™¨è¿›è¡Œæ“ä½œã€‚è¿™é‡Œæ¶‰åŠåˆ° C è¯­è¨€ç¼–è¯‘å‡ºçš„æ±‡ç¼–ç çš„é™åˆ¶ï¼Œä½¿ç”¨ä¼˜åŒ–çš„æ—¶å€™éœ€è¦æ³¨æ„ã€‚</p>
<table>
<thead>
<tr class="header">
<th style="text-align: center;">Offset</th>
<th style="text-align: center;">Size(Byte)</th>
<th style="text-align: center;">Name</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">0x0</td>
<td style="text-align: center;"><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>4</mn><annotation encoding="application/x-tex">4</annotation></semantics></math></td>
<td style="text-align: center;">usbCmd</td>
<td style="text-align: left;">ç”¨äºæ“ä½œæ§åˆ¶å™¨çš„å¯„å­˜å™¨</td>
</tr>
<tr class="even">
<td style="text-align: center;">0x4</td>
<td style="text-align: center;"><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>4</mn><annotation encoding="application/x-tex">4</annotation></semantics></math></td>
<td style="text-align: center;">usbState</td>
<td style="text-align: left;">ç”¨äºæŒ‡ç¤ºæ§åˆ¶å™¨çŠ¶æ€çš„å¯„å­˜å™¨</td>
</tr>
<tr class="odd">
<td style="text-align: center;">0x8</td>
<td style="text-align: center;"><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>4</mn><annotation encoding="application/x-tex">4</annotation></semantics></math></td>
<td style="text-align: center;">pageSize</td>
<td style="text-align: left;">ç”¨äºæŒ‡ç¤ºå¯ç”¨çš„åœ°å€çš„é¡µå¤§å°çš„å¯„å­˜å™¨</td>
</tr>
<tr class="even">
<td style="text-align: center;">0xC</td>
<td style="text-align: center;"><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>8</mn><annotation encoding="application/x-tex">8</annotation></semantics></math></td>
<td style="text-align: center;">Reserved</td>
<td style="text-align: left;">ä¿ç•™</td>
</tr>
<tr class="odd">
<td style="text-align: center;">0x14</td>
<td style="text-align: center;"><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>4</mn><annotation encoding="application/x-tex">4</annotation></semantics></math></td>
<td style="text-align: center;">devNotifCtrl</td>
<td style="text-align: left;">Device Notification Controlï¼Œç”¨äºæ§åˆ¶æ§åˆ¶å™¨çš„æŠ¥å‘Šå†…å®¹çš„å¯„å­˜å™¨</td>
</tr>
<tr class="even">
<td style="text-align: center;">0x18</td>
<td style="text-align: center;"><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>8</mn><annotation encoding="application/x-tex">8</annotation></semantics></math></td>
<td style="text-align: center;">cmdRingCtrl</td>
<td style="text-align: left;">Command Ring Control</td>
</tr>
<tr class="odd">
<td style="text-align: center;">0x20</td>
<td style="text-align: center;"><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>8</mn><annotation encoding="application/x-tex">8</annotation></semantics></math></td>
<td style="text-align: center;">Reserved</td>
<td style="text-align: left;">ä¿ç•™</td>
</tr>
<tr class="even">
<td style="text-align: center;">0x30</td>
<td style="text-align: center;"><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>8</mn><annotation encoding="application/x-tex">8</annotation></semantics></math></td>
<td style="text-align: center;">devCtxBaseAddr</td>
<td style="text-align: left;">Device Context Base Addressï¼Œç”¨äºä¿å­˜ä¸Šä¸‹æ–‡ç»“æ„çš„åŸºåœ°å€</td>
</tr>
<tr class="odd">
<td style="text-align: center;">0x38</td>
<td style="text-align: center;"><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>4</mn><annotation encoding="application/x-tex">4</annotation></semantics></math></td>
<td style="text-align: center;">config</td>
<td style="text-align: left;">Configurationï¼Œé…ç½®</td>
</tr>
<tr class="even">
<td style="text-align: center;">0x3c</td>
<td style="text-align: center;"><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>964</mn><annotation encoding="application/x-tex">964</annotation></semantics></math></td>
<td style="text-align: center;">Reserved</td>
<td style="text-align: left;">ä¿ç•™</td>
</tr>
<tr class="odd">
<td style="text-align: center;">0x400</td>
<td style="text-align: center;"><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>16</mn><mi>n</mi></mrow><annotation encoding="application/x-tex">16n</annotation></semantics></math></td>
<td style="text-align: center;">PortRegs</td>
<td style="text-align: left;">ç«¯å£çš„å¯„å­˜å™¨ç»„é›†åˆ</td>
</tr>
</tbody>
</table>
<p>ä¸‹ä¸€ä¸ªå°ç»“ä¼šè§£é‡Šç«¯å£å¯„å­˜å™¨ç»„çš„æ•°æ®ç»“æ„ã€‚</p>
<h3 id="usbcmdå¯¹æ§åˆ¶å™¨çš„å‘½ä»¤">usbCmdï¼Œå¯¹æ§åˆ¶å™¨çš„å‘½ä»¤</h3>
<p>å¯¹è¿™ä¸ªå¯„å­˜å™¨å†™å…¥ä¹‹åä¸ä¸€å®šç«‹åˆ»æœ‰æ•ˆæœã€‚å› æ­¤å†™å…¥ä¹‹åéœ€è¦ä¿è¯è¯¥ä½è¢«æˆåŠŸè®¾ç½®ã€‚</p>
<table>
<colgroup>
<col style="width: 17%" />
<col style="width: 28%" />
<col style="width: 28%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">Bit</th>
<th style="text-align: center;">Access</th>
<th style="text-align: center;">Name</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">0</td>
<td style="text-align: center;">R/W</td>
<td style="text-align: center;">Run/Stop (RS)</td>
<td style="text-align: left;">Run(1);Stop(0)ï¼Œå†™å…¥ <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>0</mn><annotation encoding="application/x-tex">0</annotation></semantics></math> ä¹‹åï¼Œéœ€è¦ç­‰åˆ° <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtext mathvariant="normal">usbState</mtext><annotation encoding="application/x-tex">\text{usbState}</annotation></semantics></math> ä¸­çš„ <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtext mathvariant="normal">usbHalted</mtext><annotation encoding="application/x-tex">\text{usbHalted}</annotation></semantics></math> ä½è¢«æˆåŠŸç½®ä½æ‰ç®—å®Œæˆæ“ä½œã€‚</td>
</tr>
<tr class="even">
<td style="text-align: center;">1</td>
<td style="text-align: center;">R/W</td>
<td style="text-align: center;">Host Controller Reset (HCRST)</td>
<td style="text-align: left;">é‡ç½®ã€‚å°†æ“ä½œå¯„å­˜å™¨ç»„çš„æ‰€æœ‰å¯„å­˜å™¨è®¾ä¸ºé»˜è®¤å€¼ï¼Œå°†æ‰€æœ‰çš„ Transaction è®¾ç½®ä¸ºåœæ­¢çŠ¶æ€(Halt)ã€‚å¯¹ USB2.0 ä¸‹æ¸¸è®¾å¤‡æ— æ•ˆï¼›ä½¿ USB3.0 è®¾å¤‡è¿›è¡Œ çƒ­é‡ç½® (Hot Reset) æˆ–æ¸©é‡ç½® (Warm Reset) ã€‚éœ€è¦ä¿è¯ <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtext mathvariant="normal">usbHalted</mtext><annotation encoding="application/x-tex">\text{usbHalted}</annotation></semantics></math> ä½åœ¨é‡ç½®ä¹‹å‰å·²ç»è¢«è®¾ç½®ä¸º <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>1</mn><annotation encoding="application/x-tex">1</annotation></semantics></math> ã€‚é‡ç½®å®Œæˆä¹‹åè¿™ä¸€ä½ä¼šè¢«å¤ä½æˆ <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>0</mn><annotation encoding="application/x-tex">0</annotation></semantics></math> ã€‚</td>
</tr>
<tr class="odd">
<td style="text-align: center;">2</td>
<td style="text-align: center;">R/W</td>
<td style="text-align: center;">Interrupter Enable (INTE)</td>
<td style="text-align: left;">æ˜¯(1)å¦(0)èƒ½è®©ä¸­æ–­å™¨ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªä¸­æ–­ä¸´ç•Œç‚¹ (Interrupt threshold)ï¼Œ<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">=0</annotation></semantics></math>ï¼šç¦ç”¨ä¸­æ–­</td>
</tr>
<tr class="even">
<td style="text-align: center;">3</td>
<td style="text-align: center;">R/W</td>
<td style="text-align: center;">Host System Error Enable (HSEE)</td>
<td style="text-align: left;">æ˜¯(1)å¦(0)å…è®¸å½“ <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtext mathvariant="normal">usbState</mtext><annotation encoding="application/x-tex">\text{usbState}</annotation></semantics></math> çš„ <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtext mathvariant="normal">HSE</mtext><annotation encoding="application/x-tex">\text{HSE}</annotation></semantics></math> ä½è¢«è®¾ä¸º <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>1</mn><annotation encoding="application/x-tex">1</annotation></semantics></math> çš„æ—¶å€™è§¦å‘ä¸­æ–­</td>
</tr>
<tr class="odd">
<td style="text-align: center;">4:6</td>
<td style="text-align: center;">R/W</td>
<td style="text-align: center;">Reserved and Preserved</td>
<td style="text-align: left;">ä¿ç•™</td>
</tr>
<tr class="even">
<td style="text-align: center;">7</td>
<td style="text-align: center;">R/W or RO</td>
<td style="text-align: center;">Light Host Controller Reset (LHCRST)</td>
<td style="text-align: left;">å¦‚æœ <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtext mathvariant="normal">hccParams1</mtext><annotation encoding="application/x-tex">\text{hccParams1}</annotation></semantics></math> çš„ <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtext mathvariant="normal">LHRC</mtext><annotation encoding="application/x-tex">\text{LHRC}</annotation></semantics></math> ä½ä¸º <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>1</mn><annotation encoding="application/x-tex">1</annotation></semantics></math> ï¼Œé‚£ä¹ˆä¸º R/Wï¼Œå¯ä»¥ç”¨äºé‡ç½®ç¯ç»„å¯„å­˜å™¨ï¼Œé‡ç½®å®Œæˆä¹‹åè¢«å¤ä½ä¸º <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>0</mn><annotation encoding="application/x-tex">0</annotation></semantics></math> ï¼›å¦‚æœä¸º <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>0</mn><annotation encoding="application/x-tex">0</annotation></semantics></math> ï¼Œé‚£ä¹ˆè¿™ä¸€ä½ä¸º RO ä½</td>
</tr>
<tr class="odd">
<td style="text-align: center;">8</td>
<td style="text-align: center;">R/W</td>
<td style="text-align: center;">Controller Save State (CSS)</td>
<td style="text-align: left;">ç”¨äºæŒ‡ç¤ºæ˜¯å¦å°†çŠ¶æ€å­˜å‚¨åˆ°æ“ä½œç³»ç»Ÿç”³è¯·å¾—åˆ°çš„ Scratch buffers ä¸­ã€‚åœ¨è®¾ç½®ä¸º <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>1</mn><annotation encoding="application/x-tex">1</annotation></semantics></math> ä¹‹å‰ï¼Œéœ€è¦ä¿è¯ <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtext mathvariant="normal">usbHalted</mtext><annotation encoding="application/x-tex">\text{usbHalted}</annotation></semantics></math> ä½ä¸º <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>1</mn><annotation encoding="application/x-tex">1</annotation></semantics></math> ï¼Œä¿å­˜è¿‡ç¨‹ä¸­ï¼Œ<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtext mathvariant="normal">usbState</mtext><annotation encoding="application/x-tex">\text{usbState}</annotation></semantics></math> ä¸­çš„ <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtext mathvariant="normal">Save State Status</mtext><annotation encoding="application/x-tex">\text{Save State Status}</annotation></semantics></math> ä½ä¼šè¢«è®¾ç½®ä¸º <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>1</mn><annotation encoding="application/x-tex">1</annotation></semantics></math> ã€‚</td>
</tr>
<tr class="even">
<td style="text-align: center;">9</td>
<td style="text-align: center;">R/W</td>
<td style="text-align: center;">Controller Restore State (CRS)</td>
<td style="text-align: left;">ç”¨äºæŒ‡ç¤ºæ˜¯å¦ä» Scratch buffer ä¸­æ¢å¤çŠ¶æ€ï¼Œåœ¨è®¾ç½®ä¸º <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>1</mn><annotation encoding="application/x-tex">1</annotation></semantics></math> ä¹‹å‰ï¼Œéœ€è¦ä¿è¯ <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtext mathvariant="normal">usbHalted</mtext><annotation encoding="application/x-tex">\text{usbHalted}</annotation></semantics></math> ä½ä¸º <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>1</mn><annotation encoding="application/x-tex">1</annotation></semantics></math> ã€‚ç±»ä¼¼çš„ï¼Œç”¨ <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtext mathvariant="normal">usbState</mtext><annotation encoding="application/x-tex">\text{usbState}</annotation></semantics></math> ä¸­çš„ <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtext mathvariant="normal">Restore State Status</mtext><annotation encoding="application/x-tex">\text{Restore State Status}</annotation></semantics></math> ä½è¡¨ç¤ºæ˜¯å¦æ¢å¤å®Œæˆï¼Œ æ¢å¤æ—¶è¢«è®¾ç½®ä¸º <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>1</mn><annotation encoding="application/x-tex">1</annotation></semantics></math>ã€‚</td>
</tr>
<tr class="odd">
<td style="text-align: center;">10</td>
<td style="text-align: center;">R/W</td>
<td style="text-align: center;">Enable Wrap Event (EWE)</td>
<td style="text-align: left;">æ˜¯(1)å¦(0)åœ¨ <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtext mathvariant="normal">MFINDEX</mtext><annotation encoding="application/x-tex">\text{MFINDEX}</annotation></semantics></math> å¯„å­˜å™¨ä» <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtext mathvariant="monospace">ğŸ¶ğš¡ğŸ¹ğšğšğš</mtext><annotation encoding="application/x-tex">\texttt{0x3fff}</annotation></semantics></math> å˜ä¸º <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtext mathvariant="monospace">ğŸ¶ğš¡ğŸ¶ğŸ¶ğŸ¶ğŸ¶</mtext><annotation encoding="application/x-tex">\texttt{0x0000}</annotation></semantics></math> æ—¶å€™è§¦å‘ä¸­æ–­</td>
</tr>
<tr class="even">
<td style="text-align: center;">11</td>
<td style="text-align: center;">R/W</td>
<td style="text-align: center;">Enable U3 MFINDEX Stop (EU3S)</td>
<td style="text-align: left;">æ˜¯(1)å¦(0)åœ¨ é€šç”µçŠ¶æ€å¤„äº U3 çš„æ—¶å€™åœæ­¢ <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtext mathvariant="monospace">ğ™¼ğ™µğ™¸ğ™½ğ™³ğ™´ğš‡</mtext><annotation encoding="application/x-tex">\texttt{MFINDEX}</annotation></semantics></math> å¯„å­˜å™¨</td>
</tr>
<tr class="odd">
<td style="text-align: center;">12</td>
<td style="text-align: center;">R/W</td>
<td style="text-align: center;">Stopped Short Packet Enable (SPE)</td>
<td style="text-align: left;">æ˜¯(1)å¦(0)äº§ç”Ÿå‘å‡ºçŸ­æ•°æ®åŒ…åœæ­¢ä»£ç (Stopped-Short Packet Completion code)</td>
</tr>
<tr class="even">
<td style="text-align: center;">13</td>
<td style="text-align: center;">R/W</td>
<td style="text-align: center;">CEM Enable (CME)</td>
<td style="text-align: left;">æ˜¯(1)å¦(0)å¯ä»¥åœ¨ Configuration Endpoint Command æŒ‡ä»¤è¢«æ¥å—å¹¶äº§ç”Ÿé”™è¯¯çš„æ—¶å€™ï¼Œè¿”å› æœ€å¤§é€€å‡ºæ½œä¼æœŸè¿‡é•¿çš„å…¼å®¹é”™è¯¯(Exit Latency too Large compatibility error)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">14:31</td>
<td style="text-align: center;">R/W</td>
<td style="text-align: center;">Reserved and preserved</td>
<td style="text-align: left;">ä¿ç•™</td>
</tr>
</tbody>
</table>
<h3 id="usbstateæ§åˆ¶å™¨çš„çŠ¶æ€">usbStateï¼Œæ§åˆ¶å™¨çš„çŠ¶æ€</h3>
<p>è¿™é‡Œè¦è§£é‡Šä¸€ä¸‹ WC å³ Write Clear çš„æ„æ€ï¼šå½“æŸä¸€ä½è¢«å†™å…¥ <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>0</mn><annotation encoding="application/x-tex">0</annotation></semantics></math> çš„æ—¶å€™ï¼Œä¸ä¼šæ”¹å˜è¯¥ä½çš„å€¼ï¼Œå½“å†™å…¥ <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>1</mn><annotation encoding="application/x-tex">1</annotation></semantics></math> çš„æ—¶å€™ï¼Œè¯¥ä½å˜ä¸º <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>0</mn><annotation encoding="application/x-tex">0</annotation></semantics></math> ã€‚</p>
<table>
<colgroup>
<col style="width: 17%" />
<col style="width: 28%" />
<col style="width: 28%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">Bit</th>
<th style="text-align: center;">Access</th>
<th style="text-align: center;">Name</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">0</td>
<td style="text-align: center;">RO</td>
<td style="text-align: center;">HCHalted</td>
<td style="text-align: left;">æ§åˆ¶å™¨æ˜¯å¦å› ä¸º <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtext mathvariant="normal">RS</mtext><annotation encoding="application/x-tex">\text{RS}</annotation></semantics></math> ä½è¢«è®¾ç½®ï¼Œæˆ–è€…æ§åˆ¶å™¨äº§ç”Ÿé”™è¯¯è€Œåœæ­¢ã€‚</td>
</tr>
<tr class="even">
<td style="text-align: center;">1</td>
<td style="text-align: center;">R/W</td>
<td style="text-align: center;">Reserved and preserved</td>
<td style="text-align: left;">ä¿ç•™</td>
</tr>
<tr class="odd">
<td style="text-align: center;">2</td>
<td style="text-align: center;">R/WC</td>
<td style="text-align: center;">Host System Error (HSE)</td>
<td style="text-align: left;">å½“æ§åˆ¶å™¨äº§ç”Ÿä¸¥é‡é”™è¯¯çš„æ—¶å€™è¢«è®¾ç½®ä¸º <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>1</mn><annotation encoding="application/x-tex">1</annotation></semantics></math> ï¼Œå¦åˆ™ä¸º <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>0</mn><annotation encoding="application/x-tex">0</annotation></semantics></math> ã€‚</td>
</tr>
<tr class="even">
<td style="text-align: center;">3</td>
<td style="text-align: center;">R/WC</td>
<td style="text-align: center;">Event Interrupt (EINT)</td>
<td style="text-align: left;">å½“ä»»ä½•ä¸€ä¸ªä¸­æ–­å™¨çš„ <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtext mathvariant="normal">Interrupt Pending</mtext><annotation encoding="application/x-tex">\text{Interrupt Pending}</annotation></semantics></math> ä½è¢«è®¾ç½®çš„æ—¶å€™ï¼Œè¿™ä¸€ä½è¢«è®¾ç½®ä¸º <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>1</mn><annotation encoding="application/x-tex">1</annotation></semantics></math>ï¼Œå¦åˆ™ä¸º <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>0</mn><annotation encoding="application/x-tex">0</annotation></semantics></math> ã€‚</td>
</tr>
<tr class="odd">
<td style="text-align: center;">4</td>
<td style="text-align: center;">R/WC</td>
<td style="text-align: center;">Port Change Detected (PCD)</td>
<td style="text-align: left;">å½“æ§åˆ¶å™¨çš„ä»»ä½•ä¸€ä¸ªç«¯å£çš„è¿æ¥çŠ¶æ€ä½ä» <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>0</mn><annotation encoding="application/x-tex">0</annotation></semantics></math> å˜ä¸º <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>1</mn><annotation encoding="application/x-tex">1</annotation></semantics></math> çš„æ—¶å€™ï¼Œè¿™ä¸€ä½è¢«è®¾ç½®ä¸º <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>1</mn><annotation encoding="application/x-tex">1</annotation></semantics></math>ï¼Œå¦åˆ™ä¸º <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>0</mn><annotation encoding="application/x-tex">0</annotation></semantics></math> ã€‚</td>
</tr>
<tr class="even">
<td style="text-align: center;">5:7</td>
<td style="text-align: center;">R/W</td>
<td style="text-align: center;">Reserved and preserved</td>
<td style="text-align: left;">ä¿ç•™</td>
</tr>
<tr class="odd">
<td style="text-align: center;">8</td>
<td style="text-align: center;">RO</td>
<td style="text-align: center;">Save State Status (SSS)</td>
<td style="text-align: left;">å½“ä¿å­˜çŠ¶æ€çš„æ“ä½œå¤„äºè¿›è¡Œæ—¶ï¼Œè¿™ä¸€ä½è¢«è®¾ç½®ä¸º <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>1</mn><annotation encoding="application/x-tex">1</annotation></semantics></math>ï¼Œä¿å­˜å®Œæˆä¹‹åä¼šè¢«è®¾ç½®ä¸º <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>0</mn><annotation encoding="application/x-tex">0</annotation></semantics></math> ã€‚</td>
</tr>
<tr class="even">
<td style="text-align: center;">9</td>
<td style="text-align: center;">RO</td>
<td style="text-align: center;">Restore State Status (RSS)</td>
<td style="text-align: left;">å½“æ¢å¤çŠ¶æ€çš„æ“ä½œå¤„äºè¿›è¡Œæ—¶ï¼Œè¿™ä¸€ä½è¢«è®¾ç½®ä¸º <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>1</mn><annotation encoding="application/x-tex">1</annotation></semantics></math>ï¼Œæ¢å¤å®Œæˆä¹‹åä¼šè¢«è®¾ç½®ä¸º <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>0</mn><annotation encoding="application/x-tex">0</annotation></semantics></math> ã€‚</td>
</tr>
<tr class="odd">
<td style="text-align: center;">10</td>
<td style="text-align: center;">R/WC</td>
<td style="text-align: center;">Save/Restore Error (SRE)</td>
<td style="text-align: left;">è¡¨ç¤ºä¿å­˜çŠ¶æ€/æ¢å¤çŠ¶æ€çš„æ“ä½œæ˜¯(1)å¦(0)äº§ç”Ÿé”™è¯¯ã€‚</td>
</tr>
<tr class="even">
<td style="text-align: center;">11</td>
<td style="text-align: center;">RO</td>
<td style="text-align: center;">Controller Not Ready (CNR)</td>
<td style="text-align: left;">å¦‚æœè¢«è®¾ç½®ï¼Œåˆ™ç¦æ­¢å¯¹æ“ä½œå¯„å­˜å™¨ç»„ï¼ˆé™¤äº† $ï¼‰æˆ–Doorbellå¯„å­˜å™¨ç»„è¿›è¡Œä»»ä½•å†™å…¥æ“ä½œã€‚å½“å¤„äºâ€œé‡ç½®ä¸­â€æ—¶ï¼Œè¿™ä¸€ä½ä¼šè¢«è®¾ç½®ã€‚</td>
</tr>
<tr class="odd">
<td style="text-align: center;">12</td>
<td style="text-align: center;">RO</td>
<td style="text-align: center;">Host Controller Error (HCE)</td>
<td style="text-align: left;">è¡¨ç¤ºæ˜¯(1)å¦(0)å‘ç”Ÿå¤–éƒ¨é”™è¯¯ï¼Œéœ€è¦é‡ç½®å’Œé‡æ–°åˆå§‹åŒ–æ§åˆ¶å™¨ã€‚</td>
</tr>
<tr class="even">
<td style="text-align: center;">13:31</td>
<td style="text-align: center;">R/W</td>
<td style="text-align: center;">Reserved and preserved</td>
<td style="text-align: left;">ä¿ç•™</td>
</tr>
</tbody>
</table>
<h3 id="pagesizeè¯¥æ§åˆ¶å™¨æ”¯æŒçš„é¡µå¤§å°">pageSizeï¼Œè¯¥æ§åˆ¶å™¨æ”¯æŒçš„é¡µå¤§å°</h3>
<p>è¯¥å¯„å­˜å™¨çš„ Bit 16:31 ä¸ºä¿ç•™ä½ï¼Œå¯¹äº Bit 0:15 ï¼Œå¦‚æœå…¶ä¸­çš„ Bit <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>x</mi><annotation encoding="application/x-tex">x</annotation></semantics></math> è¢«è®¾ç½®ä¸º <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>1</mn><annotation encoding="application/x-tex">1</annotation></semantics></math> ï¼Œåˆ™è¡¨ç¤ºè¯¥æ§åˆ¶å™¨æ”¯æŒå¤§å°ä¸º <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mrow><mi>x</mi><mo>+</mo><mn>12</mn></mrow></msup><mtext mathvariant="monospace">ğ™±</mtext></mrow><annotation encoding="application/x-tex">2^{x+12} \texttt{B}</annotation></semantics></math> çš„ç‰©ç†é¡µ ã€‚åœ¨æœ¬äººçš„æœºå­ä¸Šï¼Œå‡æœ‰ <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="normal">pageSize</mtext><mo>âˆ©</mo><mtext mathvariant="monospace">ğŸ¶ğš¡ğšğšğšğš</mtext><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">\text{pageSize}\cap\texttt{0xffff}=0</annotation></semantics></math> ã€‚å¯ä»¥ä½¿ç”¨å¦‚ä¸‹è®¡ç®—æ–¹æ³•ç›´æ¥è·å¾—å®é™…å¤§å°:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true"></a>size = (pageSize &amp; <span class="bn">0xffff</span><span class="bu">ul</span>) &lt;&lt; <span class="dv">12</span></span></code></pre></div>
<h3 id="devnotifctrlæ§åˆ¶å™¨æ¥å—é€šçŸ¥åŒ…çš„æ§åˆ¶å¯„å­˜å™¨">devNotifCtrlï¼Œæ§åˆ¶å™¨æ¥å—é€šçŸ¥åŒ…çš„æ§åˆ¶å¯„å­˜å™¨</h3>
<p>è¯¥å¯„å­˜å™¨çš„ Bit 16:31 ä¸ºä¿ç•™ä½ï¼Œå¯¹äº Bit 0:15 ï¼Œå¦‚æœå…¶ä¸­çš„ Bit <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>x</mi><annotation encoding="application/x-tex">x</annotation></semantics></math> è¢«è®¾ç½®ä¸º <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>1</mn><annotation encoding="application/x-tex">1</annotation></semantics></math> ï¼Œåˆ™è¡¨ç¤ºæ¿€æ´»ç¬¬ <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>x</mi><annotation encoding="application/x-tex">x</annotation></semantics></math> ç§é€šçŸ¥ç±»å‹ã€‚</p>
<h3 id="cmdringctrlæŒ‡ä»¤ç¯çš„æ§åˆ¶å¯„å­˜å™¨">cmdRingCtrlï¼ŒæŒ‡ä»¤ç¯çš„æ§åˆ¶å¯„å­˜å™¨</h3>
<table>
<colgroup>
<col style="width: 17%" />
<col style="width: 28%" />
<col style="width: 28%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">Bit</th>
<th style="text-align: center;">Access</th>
<th style="text-align: center;">Name</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">0</td>
<td style="text-align: center;">R/W</td>
<td style="text-align: center;">Ring Cycle State (RCS)</td>
<td style="text-align: left;">å‘ŠçŸ¥æ§åˆ¶å™¨æºå¸¦ä¸€ä¸ªè®¾ç½®ä½(set bit)æˆ–è€…ä¸€ä¸ªæ¸…ç†ä½(clear bit)æ¥å¼€å§‹å¤„ç†æŒ‡ä»¤ç¯</td>
</tr>
<tr class="even">
<td style="text-align: center;">1</td>
<td style="text-align: center;">R/WC</td>
<td style="text-align: center;">Command Stop (CS)</td>
<td style="text-align: left;">å‘ŠçŸ¥æ§åˆ¶å™¨æ˜¯å¦åœæ­¢å¤„ç†æŒ‡ä»¤ç¯ã€‚åœ¨å¤„ç†å®Œæˆå½“å‰æŒ‡ä»¤ä¹‹åä¼šåœæ­¢å¤„ç†æŒ‡ä»¤ç¯ï¼Œç„¶ååœ¨äº‹ä»¶ç¯ä¸­æ”¾å…¥ä¸€ä¸ªä»»åŠ¡ç¯åœæ­¢äº‹ä»¶ (Command Ring Stopped event)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">2</td>
<td style="text-align: center;">R/WC</td>
<td style="text-align: center;">Command Abort (CA)</td>
<td style="text-align: left;">ç›´æ¥åœæ­¢å¤„ç†æŒ‡ä»¤ç¯ï¼Œç„¶åæ”¾å…¥ä¸€ä¸ªä»»åŠ¡ç¯åœæ­¢äº‹ä»¶ (Command Ring Stopped event)</td>
</tr>
<tr class="even">
<td style="text-align: center;">3</td>
<td style="text-align: center;">RO</td>
<td style="text-align: center;">Command Ring Running (CRR)</td>
<td style="text-align: left;">è¡¨ç¤ºå½“å‰æ˜¯å¦åœ¨å¤„ç†æŒ‡ä»¤ç¯</td>
</tr>
<tr class="odd">
<td style="text-align: center;">4:5</td>
<td style="text-align: center;">R/W</td>
<td style="text-align: center;">Reserved and preserved</td>
<td style="text-align: left;">ä¿ç•™</td>
</tr>
<tr class="even">
<td style="text-align: center;">6:63</td>
<td style="text-align: center;">R/W</td>
<td style="text-align: center;">Command Ring Pointer</td>
<td style="text-align: left;">æŒ‡ä»¤ç¯çš„åœ°å€çš„é«˜ <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>58</mn><annotation encoding="application/x-tex">58</annotation></semantics></math> ä½ï¼Œä¹Ÿå°±æ˜¯å°†è¿™ä¸ªå¯„å­˜å™¨ <code>&amp; (~0x3ful)</code> å³ä¸ºæŒ‡ä»¤ç¯çš„åœ°å€</td>
</tr>
</tbody>
</table>
<h3 id="devctxbaseaddrè®¾å¤‡ä¸Šä¸‹æ–‡çš„åŸºåœ°å€">devCtxBaseAddrï¼Œè®¾å¤‡ä¸Šä¸‹æ–‡çš„åŸºåœ°å€</h3>
<table>
<thead>
<tr class="header">
<th style="text-align: center;">Bit</th>
<th style="text-align: center;">Access</th>
<th style="text-align: center;">Name</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">0:5</td>
<td style="text-align: center;">R/W</td>
<td style="text-align: center;">Reserved</td>
<td style="text-align: left;">å¿…é¡»ä¸º <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>0</mn><annotation encoding="application/x-tex">0</annotation></semantics></math></td>
</tr>
<tr class="even">
<td style="text-align: center;">6:63</td>
<td style="text-align: center;">R/W</td>
<td style="text-align: center;">Device Context Base Address Array Pointer</td>
<td style="text-align: left;">åœ°å€çš„é«˜ <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>58</mn><annotation encoding="application/x-tex">58</annotation></semantics></math> ä½</td>
</tr>
</tbody>
</table>
<p>å®é™…ä¸Šå°±æ˜¯å­˜å‚¨ä¸€ä¸ªå¯¹ <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>64</mn><annotation encoding="application/x-tex">64</annotation></semantics></math> å¯¹é½çš„åœ°å€ã€‚</p>
<h3 id="configé…ç½®å¯„å­˜å™¨">configï¼Œé…ç½®å¯„å­˜å™¨</h3>
<table>
<colgroup>
<col style="width: 17%" />
<col style="width: 28%" />
<col style="width: 28%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">Bit</th>
<th style="text-align: center;">Access</th>
<th style="text-align: center;">Name</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">0:7</td>
<td style="text-align: center;">R/W</td>
<td style="text-align: center;">Max Device Slots Enabled (MaxSlotsEn)</td>
<td style="text-align: left;">è®¾ç½®æ¿€æ´»çš„æœ€å¤§æ’æ§½IDï¼Œåªèƒ½åœ¨ <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="normal">RS</mtext><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">\text{RS}=0</annotation></semantics></math> çš„æ—¶å€™è®¾ç½®è¿™ä¸ªæ®µã€‚</td>
</tr>
<tr class="even">
<td style="text-align: center;">8</td>
<td style="text-align: center;">R/W</td>
<td style="text-align: center;">U3 Entry Enable (U3E)</td>
<td style="text-align: left;">è¡¨ç¤ºæ§åˆ¶å™¨è½¬ç§»åˆ° U3 çŠ¶æ€çš„æ—¶å€™æ˜¯å¦è®¾ç½® PLC æ ‡å¿—ä½ã€‚ <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtext mathvariant="normal">hccParams0</mtext><annotation encoding="application/x-tex">\text{hccParams0}</annotation></semantics></math> çš„ Bit 0 æŒ‡ç¤ºæ˜¯å¦æ”¯æŒè¿™ä¸€ä½ã€‚</td>
</tr>
<tr class="odd">
<td style="text-align: center;">9</td>
<td style="text-align: center;">R/W</td>
<td style="text-align: center;">Configuration Information Enable (CIE)</td>
<td style="text-align: left;">æ˜¯å¦åˆå§‹åŒ– è¾“å…¥æ§åˆ¶ä¸Šä¸‹æ–‡å—çš„ Configuration Value, Interface Number å’Œ Alternate Settings åŸŸï¼Œ<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtext mathvariant="normal">hccParams0</mtext><annotation encoding="application/x-tex">\text{hccParams0}</annotation></semantics></math> çš„ Bit 5 æŒ‡ç¤ºæ˜¯å¦æ”¯æŒè¿™ä¸€ä½ã€‚</td>
</tr>
<tr class="even">
<td style="text-align: center;">10:31</td>
<td style="text-align: center;">R/W</td>
<td style="text-align: center;">Reserved and preserved</td>
<td style="text-align: left;">ä¿ç•™</td>
</tr>
</tbody>
</table>
<h2 id="port-registers-ç«¯å£çŠ¶æ€å’Œæ§åˆ¶å¯„å­˜å™¨ç»„">Port Registers, ç«¯å£çŠ¶æ€å’Œæ§åˆ¶å¯„å­˜å™¨ç»„</h2>
<p>æ¯ä¸€ä¸ªç«¯å£å¯„å­˜å™¨ç»„ç”± <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>4</mn><annotation encoding="application/x-tex">4</annotation></semantics></math> ä¸ª <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>32</mn><annotation encoding="application/x-tex">32</annotation></semantics></math> ä½æ•´æ•°æè¿°ã€‚æŸäº›å¯„å­˜å™¨åœ¨ USB 2.0 å’Œ 3.1 ä¸‹ä¼šæœ‰ä¸åŒçš„å«ä¹‰ã€‚</p>
<table>
<thead>
<tr class="header">
<th style="text-align: center;">Offset</th>
<th style="text-align: center;">Name</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">0x0</td>
<td style="text-align: center;">stsCtrl</td>
<td style="text-align: left;">Port Status and Control, ç”¨äºç«¯å£çš„çŠ¶æ€æŸ¥è¯¢å’Œæ§åˆ¶ï¼Œå‡ ä¹æ¯ä¸€ä¸ªä½éƒ½æœ‰ä½œç”¨</td>
</tr>
<tr class="even">
<td style="text-align: center;">0x4</td>
<td style="text-align: center;">pwStsCtrl</td>
<td style="text-align: left;">Port Power Management Status and Controlï¼Œç”¨äºç«¯å£ç”µæºçš„çŠ¶æ€æŸ¥è¯¢å’Œæ§åˆ¶</td>
</tr>
<tr class="odd">
<td style="text-align: center;">0x8</td>
<td style="text-align: center;">lkInfo</td>
<td style="text-align: left;">Port Link Info, ä¿å­˜ç«¯å£çš„é“¾æ¥ä¿¡æ¯</td>
</tr>
<tr class="even">
<td style="text-align: center;">0xc</td>
<td style="text-align: center;">hwLPMCtrl</td>
<td style="text-align: left;">Port Hardware LPM Control</td>
</tr>
</tbody>
</table>
<h3 id="stsctrl-ç«¯å£çš„çŠ¶æ€å’Œæ§åˆ¶">stsCtrl, ç«¯å£çš„çŠ¶æ€å’Œæ§åˆ¶</h3>
<p>ä¸‹è¡¨å±•ç¤ºäº†è¿™ä¸ªå¯„å­˜å™¨æ¯ä¸€ä½çš„ä½œç”¨ï¼Œå¯¹äºæŸäº›ä½ç½®ï¼Œä¼šæœ‰ä¸€äº›å¿…è¦çš„è¡¥å……è¯´æ˜ã€‚åœ¨ <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtext mathvariant="normal">RS</mtext><annotation encoding="application/x-tex">\text{RS}</annotation></semantics></math> è¢«è®¾ç½®ä¸º <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>1</mn><annotation encoding="application/x-tex">1</annotation></semantics></math> å¹¶ä¸” <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="normal">usbHalted</mtext><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">\text{usbHalted}=0</annotation></semantics></math> ä¹‹åï¼Œè¿™ä¸ªå¯„å­˜å™¨æ‰èƒ½æ­£å¸¸ä½¿ç”¨ã€‚</p>
<p><strong>PS</strong>: æ ‡æœ‰ä¸‹åˆ’çº¿çš„ä½æ˜¯ä»…é€‚ç”¨äº USB 3.0 çš„ä½ï¼Œå¯¹äº USB 2.0 åè®®çš„ç«¯å£ï¼Œè¿™äº›ä½å¤„äº Reserved and Zeroâ€™d çŠ¶æ€ã€‚</p>
<table>
<colgroup>
<col style="width: 24%" />
<col style="width: 40%" />
<col style="width: 36%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">Bit</th>
<th style="text-align: center;">Access</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">0</td>
<td style="text-align: center;">RO</td>
<td style="text-align: left;">Current Connect Statusï¼Œå½“å‰è¿æ¥çŠ¶æ€ï¼Œ1:æœ‰è®¾å¤‡è¿æ¥ï¼›0: æ— è®¾å¤‡è¿æ¥ã€‚ç”¨äºè®¾å¤‡è¿æ¥æ£€æµ‹çš„å…³é”®ä½ã€‚</td>
</tr>
<tr class="even">
<td style="text-align: center;">1</td>
<td style="text-align: center;">R/WC</td>
<td style="text-align: left;">Port Enabled(1)/Disabled(0)ï¼Œç«¯å£æ¿€æ´»çŠ¶æ€ã€‚æ§åˆ¶å™¨åœ¨é‡ç½®åï¼Œæˆ–è€…ç«¯å£é‡ç½®åä¼šæ¿€æ´»ç«¯å£å¹¶è®¾ç½®è¯¥ä½ï¼Œç”±äºä¸º WC ä½ï¼Œå› æ­¤æ“ä½œç³»ç»Ÿä¸èƒ½è‡ªè¡Œæ¿€æ´»ç«¯å£ï¼Œåªèƒ½é€šè¿‡é‡ç½®ç«¯å£æˆ–è€…æ§åˆ¶å™¨é‡æ–°æ¿€æ´»ã€‚</td>
</tr>
<tr class="odd">
<td style="text-align: center;">2</td>
<td style="text-align: center;">R/W</td>
<td style="text-align: left;">Reserved and Zeroâ€™d</td>
</tr>
<tr class="even">
<td style="text-align: center;">3</td>
<td style="text-align: center;">RO</td>
<td style="text-align: left;">Over-current Activeï¼Œè¡¨ç¤ºè¯¥ç«¯å£æ˜¯å¦å¤„äºè¿‡æµæ¿€æ´»çŠ¶æ€ (Over-current Active condition)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">4</td>
<td style="text-align: center;">R/W</td>
<td style="text-align: left;">Port Resetï¼Œå’Œ <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtext mathvariant="normal">usbCmd</mtext><annotation encoding="application/x-tex">\text{usbCmd}</annotation></semantics></math> çš„ <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtext mathvariant="normal">HCRST</mtext><annotation encoding="application/x-tex">\text{HCRST}</annotation></semantics></math> ä½åŠŸèƒ½ç±»ä¼¼ã€‚åœ¨ä¸åŒåè®®ä¸‹ï¼Œé‡ç½®æ“ä½œç•¥æœ‰ä¸åŒã€‚</td>
</tr>
<tr class="even">
<td style="text-align: center;">5:8</td>
<td style="text-align: center;">R/W</td>
<td style="text-align: left;">Port Link Stateï¼Œé“¾æ¥çŠ¶æ€ï¼Œä» <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtext mathvariant="monospace">ğŸ¶ğŸ¶ğŸ¶ğŸ¶ğš‹</mtext><annotation encoding="application/x-tex">\texttt{0000b}</annotation></semantics></math> å¼€å§‹åˆ†åˆ«è¡¨ç¤º U0, U1, U2, U3 ã€‚éœ€è¦è®¾ç½®è¯¥å¯„å­˜å™¨çš„ Bit 16 æ¥å¯ç”¨è¯¥ä½çš„å†™å…¥ã€‚ä¸€èˆ¬è€Œè¨€ï¼Œéœ€è¦è®©é“¾æ¥çŠ¶æ€å¤„äº U0 ä»¥æ­£å¸¸ä½¿ç”¨ã€‚</td>
</tr>
<tr class="odd">
<td style="text-align: center;">9</td>
<td style="text-align: center;">R/W</td>
<td style="text-align: left;">Port Powerï¼Œç”¨äºå¼€å¯æˆ–å…³é—­è¯¥ç«¯å£çš„ç”µæºã€‚<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtext mathvariant="normal">hccParams1</mtext><annotation encoding="application/x-tex">\text{hccParams1}</annotation></semantics></math> çš„ <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtext mathvariant="normal">Port Power</mtext><annotation encoding="application/x-tex">\text{Port Power}</annotation></semantics></math> ä½æŒ‡ç¤ºè¯¥ä½æ˜¯(0)å¦(1)å¯ä»¥æ­£å¸¸ä½¿ç”¨ã€‚</td>
</tr>
<tr class="even">
<td style="text-align: center;">10:13</td>
<td style="text-align: center;">RO</td>
<td style="text-align: left;">Port Speedï¼Œç”¨äºæŒ‡ç¤ºè¯¥ç«¯å£è¿æ¥è®¾å¤‡çš„é€Ÿåº¦å’Œå¯¹åº”çš„åè®®ã€‚æ¥ä¸‹æ¥ä¼šæä¾›ä¸€ä¸ªå‚ç…§è¡¨ã€‚</td>
</tr>
<tr class="odd">
<td style="text-align: center;">14:15</td>
<td style="text-align: center;">R/W</td>
<td style="text-align: left;">Port Indicator Controlï¼ŒæŒ‡æ ‡æ§åˆ¶ï¼Œè¡¨ç¤ºæ˜¯å¦å¯ä»¥æ­£å¸¸æ“ä½œï¼Œæ¥ä¸‹æ¥ä¼šæä¾›ä¸€ä¸ªå‚ç…§è¡¨ã€‚<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtext mathvariant="normal">hccParams1</mtext><annotation encoding="application/x-tex">\text{hccParams1}</annotation></semantics></math> çš„ <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtext mathvariant="normal">PIND</mtext><annotation encoding="application/x-tex">\text{PIND}</annotation></semantics></math> æŒ‡ç¤ºè¯¥ä½æ˜¯(1)å¦(0)å¯ä»¥æ­£å¸¸ä½¿ç”¨ã€‚</td>
</tr>
<tr class="even">
<td style="text-align: center;">16</td>
<td style="text-align: center;">R/W</td>
<td style="text-align: left;">Port Link State Write Strobeï¼Œç”¨äºæŒ‡ç¤ºå¯¹ <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtext mathvariant="normal">Port Link State</mtext><annotation encoding="application/x-tex">\text{Port Link State}</annotation></semantics></math> çš„å†™å…¥å°†ä¼šç”Ÿæ•ˆ(1)/è¢«å¿½ç•¥(0)ã€‚</td>
</tr>
<tr class="odd">
<td style="text-align: center;">17</td>
<td style="text-align: center;">R/WC</td>
<td style="text-align: left;">Connect Status Changeï¼Œè¿æ¥çŠ¶æ€æ˜¯å¦æ”¹å˜ï¼Œç”¨äºè®¾å¤‡è¿æ¥æ£€æµ‹çš„å…³é”®ä½ã€‚</td>
</tr>
<tr class="even">
<td style="text-align: center;">18</td>
<td style="text-align: center;">R/WC</td>
<td style="text-align: left;">Port Enable/Disable Changeï¼Œç«¯å£çš„æ¿€æ´»çŠ¶æ€æ˜¯å¦è¢«æ”¹å˜ã€‚</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><u>19</u></td>
<td style="text-align: center;">R/WC</td>
<td style="text-align: left;">Warm Port Reset Changeï¼Œå½“ç«¯å£ä¸º USB 2.0 åè®®æ—¶ï¼Œè¿™ä¸€ä½è¢«ä¿ç•™ï¼›å½“ç«¯å£ä¸º USB 3.0 æ—¶ï¼Œè‹¥ Warm Port Reset å®Œæˆï¼Œè¿™ä¸€ä½ä¼šè¢«è®¾ç½®ä¸º <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>1</mn><annotation encoding="application/x-tex">1</annotation></semantics></math></td>
</tr>
<tr class="even">
<td style="text-align: center;">20</td>
<td style="text-align: center;">R/WC</td>
<td style="text-align: left;">Over-current Changeï¼Œè¿‡æµçŠ¶æ€æ˜¯å¦å‘ç”Ÿæ”¹å˜ã€‚</td>
</tr>
<tr class="odd">
<td style="text-align: center;">21</td>
<td style="text-align: center;">R/WC</td>
<td style="text-align: left;">Port Reset Changeï¼Œå½“ <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtext mathvariant="normal">Port Reset</mtext><annotation encoding="application/x-tex">\text{Port Reset}</annotation></semantics></math> ä½ä» <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>1</mn><annotation encoding="application/x-tex">1</annotation></semantics></math> å˜ä¸º <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>0</mn><annotation encoding="application/x-tex">0</annotation></semantics></math> çš„æ—¶å€™ï¼Œè¿™ä¸€ä½è¢«è®¾ç½®ä¸º <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>1</mn><annotation encoding="application/x-tex">1</annotation></semantics></math> ã€‚</td>
</tr>
<tr class="even">
<td style="text-align: center;">22</td>
<td style="text-align: center;">R/WC</td>
<td style="text-align: left;">Port Link State Changeï¼Œå½“ Link State å‘ç”Ÿæ”¹å˜çš„æ—¶å€™ï¼Œè¿™ä¸€ä½è¢«è®¾ç½®ä¸º <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>1</mn><annotation encoding="application/x-tex">1</annotation></semantics></math> ã€‚</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><u>23</u></td>
<td style="text-align: center;">R/WC</td>
<td style="text-align: left;">Port Config Error Changeï¼ŒæŒ‡ç¤ºæ˜¯(1)å¦(0)åœ¨é…ç½®é“¾æ¥ä¼™ä¼´ (link partner) çš„æ—¶å€™å‘ç”Ÿé”™è¯¯ã€‚</td>
</tr>
<tr class="even">
<td style="text-align: center;"><u>24</u></td>
<td style="text-align: center;">RO</td>
<td style="text-align: left;">Cold Attach Statusï¼Œè¡¨ç¤ºè¿æ¥çš„è®¾å¤‡æ˜¯å¦å› ä¸ºç”µé‡ä¸è¶³ã€é”™è¯¯çš„ç”µæºçŠ¶æ€æˆ–è€…å…¶ä»–é—®é¢˜å¯¼è‡´ä¸èƒ½æ­£å¸¸è¿ä½œã€‚</td>
</tr>
<tr class="odd">
<td style="text-align: center;">25</td>
<td style="text-align: center;">R/W</td>
<td style="text-align: left;">Wake on Connect Enableï¼Œæ˜¯å¦åœ¨è¿æ¥çš„æ—¶å€™äº§ç”Ÿå¯¹åº”çš„äº‹ä»¶ã€‚</td>
</tr>
<tr class="even">
<td style="text-align: center;">26</td>
<td style="text-align: center;">R/W</td>
<td style="text-align: left;">Wake on Disconnect Enableï¼Œæ˜¯å¦åœ¨æ–­å¼€è¿æ¥çš„æ—¶å€™äº§ç”Ÿå¯¹åº”çš„äº‹ä»¶ã€‚</td>
</tr>
<tr class="odd">
<td style="text-align: center;">27</td>
<td style="text-align: center;">R/W</td>
<td style="text-align: left;">Wake on Over-current Enableï¼Œæ˜¯å¦åœ¨è¿›å…¥è¿‡æµçŠ¶æ€çš„æ—¶å€™äº§ç”Ÿå¯¹åº”çš„äº‹ä»¶ã€‚</td>
</tr>
<tr class="even">
<td style="text-align: center;">28:29</td>
<td style="text-align: center;">R/W</td>
<td style="text-align: left;">Reserved and Zeroâ€™d</td>
</tr>
<tr class="odd">
<td style="text-align: center;">30</td>
<td style="text-align: center;">RO</td>
<td style="text-align: left;">Device Removableï¼Œå½“å‰è®¾å¤‡æ˜¯å¦æ˜¯å¯ç§»é™¤çš„è®¾å¤‡ã€‚</td>
</tr>
<tr class="even">
<td style="text-align: center;"><u>31</u></td>
<td style="text-align: center;">R/WC</td>
<td style="text-align: left;">Warm Port Resetï¼Œæ“ä½œæ–¹å¼å’Œ <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtext mathvariant="normal">Port Reset</mtext><annotation encoding="application/x-tex">\text{Port Reset}</annotation></semantics></math> ç±»ä¼¼ï¼Œç”¨ <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtext mathvariant="normal">Port Reset</mtext><annotation encoding="application/x-tex">\text{Port Reset}</annotation></semantics></math>ã€<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtext mathvariant="normal">Port Reset Change</mtext><annotation encoding="application/x-tex">\text{Port Reset Change}</annotation></semantics></math> å’Œ <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtext mathvariant="normal">Warm Reset Change</mtext><annotation encoding="application/x-tex">\text{Warm Reset Change}</annotation></semantics></math> æ¥æŒ‡ç¤º Warm Reset æ˜¯å¦å®Œæˆã€‚</td>
</tr>
</tbody>
</table>
<p>æ¥ä¸‹æ¥æä¾›ä¸€ä¸ª <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtext mathvariant="normal">Port Speed</mtext><annotation encoding="application/x-tex">\text{Port Speed}</annotation></semantics></math> çš„æè¿°è¡¨ï¼š</p>
<table>
<thead>
<tr class="header">
<th style="text-align: center;">Value</th>
<th style="text-align: center;">Speed</th>
<th style="text-align: center;">Bit Rate</th>
<th style="text-align: center;">Protocol</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">0</td>
<td style="text-align: center;">Undefined</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: center;">1</td>
<td style="text-align: center;">full-speed</td>
<td style="text-align: center;"><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>12</mn><mtext mathvariant="monospace">ğ™¼ğ™±</mtext><mi>/</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">12 \texttt{MB}/s</annotation></semantics></math></td>
<td style="text-align: center;">USB 2.0</td>
</tr>
<tr class="odd">
<td style="text-align: center;">2</td>
<td style="text-align: center;">low-speed</td>
<td style="text-align: center;"><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1.5</mn><mtext mathvariant="monospace">ğ™¼ğ™±</mtext><mi>/</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">1.5 \texttt{MB}/s</annotation></semantics></math></td>
<td style="text-align: center;">USB 2.0</td>
</tr>
<tr class="even">
<td style="text-align: center;">3</td>
<td style="text-align: center;">high-speed</td>
<td style="text-align: center;"><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>480</mn><mtext mathvariant="monospace">ğ™¼ğ™±</mtext><mi>/</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">480 \texttt{MB}/s</annotation></semantics></math></td>
<td style="text-align: center;">USB 2.0</td>
</tr>
<tr class="odd">
<td style="text-align: center;">4</td>
<td style="text-align: center;">super-spped</td>
<td style="text-align: center;"><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>5</mn><mtext mathvariant="monospace">ğ™¶ğ™±</mtext><mi>/</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">5 \texttt{GB}/s</annotation></semantics></math></td>
<td style="text-align: center;">USB 3.0</td>
</tr>
</tbody>
</table>
<p>è¿˜æœ‰ä¸€ä¸ª <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtext mathvariant="normal">Port Indicator Control</mtext><annotation encoding="application/x-tex">\text{Port Indicator Control}</annotation></semantics></math> çš„å‚è€ƒè¡¨ï¼Œç”±äºä¸å¤ªæ‡‚è‹±æ–‡çš„å«ä¹‰ï¼ˆä¸èƒ½ç†è§£ä¸ºå•¥è¦ç”¨é¢œè‰²æ¥å®šä¹‰ï¼‰ï¼Œå› æ­¤ç›´æ¥ç›´è¯‘ä¹¦ä¸­åŸæ–‡ï¼š</p>
<table>
<thead>
<tr class="header">
<th style="text-align: center;">Value</th>
<th style="text-align: left;">å«ä¹‰</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtext mathvariant="monospace">ğŸ¶ğŸ¶ğš‹</mtext><annotation encoding="application/x-tex">\texttt{00b}</annotation></semantics></math></td>
<td style="text-align: left;">æŒ‡æ ‡å…³é—­</td>
</tr>
<tr class="even">
<td style="text-align: center;"><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtext mathvariant="monospace">ğŸ¶ğŸ·ğš‹</mtext><annotation encoding="application/x-tex">\texttt{01b}</annotation></semantics></math></td>
<td style="text-align: left;">ç¥ç€è‰² (Amber)ï¼Œé€šå¸¸è¡¨ç¤ºå­˜åœ¨é”™è¯¯ï¼Œéœ€è¦å› æ­¤ç¡¬ä»¶æ³¨æ„ã€‚</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtext mathvariant="monospace">ğŸ·ğŸ¶ğš‹</mtext><annotation encoding="application/x-tex">\texttt{10b}</annotation></semantics></math></td>
<td style="text-align: left;">ç»¿è‰² (Green)ï¼Œä¸€åˆ‡æ­£å¸¸ã€‚</td>
</tr>
<tr class="even">
<td style="text-align: center;"><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtext mathvariant="monospace">ğŸ·ğŸ·ğš‹</mtext><annotation encoding="application/x-tex">\texttt{11b}</annotation></semantics></math></td>
<td style="text-align: left;">æœªå®šä¹‰</td>
</tr>
</tbody>
</table>
<p>è¿™é‡Œçš„æŒ‡æ ‡æŒ‡çš„æ˜¯ç«¯å£çš„æŒ‡æ ‡ï¼Œè€Œä¸æ˜¯ç«¯å£ä¸Šè®¾å¤‡çš„æŒ‡æ ‡ã€‚</p>
<h3 id="pwstsctrlç«¯å£ç”µæºçš„çŠ¶æ€å’Œæ§åˆ¶">pwStsCtrlï¼Œç«¯å£ç”µæºçš„çŠ¶æ€å’Œæ§åˆ¶</h3>
<p>å¯¹äºä½¿ç”¨ USB 2.0 çš„ç«¯å£ï¼Œä½¿ç”¨ä¸‹é¢çš„æè¿°è¡¨ï¼š</p>
<table>
<colgroup>
<col style="width: 24%" />
<col style="width: 40%" />
<col style="width: 36%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">Bit</th>
<th style="text-align: center;">Access</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">0:2</td>
<td style="text-align: center;">RO</td>
<td style="text-align: left;">L1 Statusï¼Œè¡¨ç¤º L1 ä¸‹çš„æš‚åœ (suspend) è¯·æ±‚çš„çŠ¶æ€ã€‚æ¥ä¸‹æ¥ä¼šæä¾›æ¯ä¸ªå€¼å¯¹åº”çš„å«ä¹‰ã€‚</td>
</tr>
<tr class="even">
<td style="text-align: center;">3</td>
<td style="text-align: center;">R/W</td>
<td style="text-align: left;">Remote Wake Enableï¼Œæ¿€æ´»ä» L1 çŠ¶æ€çš„è¿œç¨‹å”¤é†’ã€‚</td>
</tr>
<tr class="odd">
<td style="text-align: center;">4:7</td>
<td style="text-align: center;">R/W</td>
<td style="text-align: left;">Host Initiated Resume Durationï¼Œè‹¥è¯¥æ®µçš„å€¼ä¸º <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>x</mi><annotation encoding="application/x-tex">x</annotation></semantics></math> ï¼Œåˆ™è¡¨ç¤ºæ§åˆ¶å™¨åˆå§‹åŒ–å¹¶é€€å‡º L1 çŠ¶æ€åæ¢å¤æ‰€éœ€è¦çš„æ—¶é—´ä¸º <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>50</mn><mo>+</mo><mn>75</mn><mi>x</mi></mrow><annotation encoding="application/x-tex">50+75x</annotation></semantics></math> ã€‚</td>
</tr>
<tr class="even">
<td style="text-align: center;">8:15</td>
<td style="text-align: center;">R/W</td>
<td style="text-align: left;">L1 Device Slotï¼Œç”¨äºæŒ‡ç¤ºè¯¥ç«¯å£çš„å“ªä¸ªè®¾å¤‡æ§½ç”¨äºäº§ç”Ÿ LMP Token packetï¼Œ<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">=0</annotation></semantics></math> è¡¨ç¤ºæ²¡æœ‰è®¾å¤‡ã€‚</td>
</tr>
<tr class="odd">
<td style="text-align: center;">16</td>
<td style="text-align: center;">R/W</td>
<td style="text-align: left;">Hardware LPM Enableï¼Œ<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">=1</annotation></semantics></math>: æ¿€æ´»ç¡¬ä»¶æ§åˆ¶çš„ LPMã€‚å½“ ç¡¬ä»¶ LMP ä½¿èƒ½å¹¶ä¸æ”¯æŒçš„æ—¶å€™ï¼Œè¿™ä¸ªä½è¢«ä¿ç•™ã€‚</td>
</tr>
<tr class="even">
<td style="text-align: center;">17:27</td>
<td style="text-align: center;">R/W</td>
<td style="text-align: left;">Reserved and preservedï¼Œä¿ç•™</td>
</tr>
<tr class="odd">
<td style="text-align: center;">28:31</td>
<td style="text-align: center;">R/W</td>
<td style="text-align: left;">è½¯ä»¶å‘è¿™ä¸ªæ®µå†™å…¥æŸäº›æ•°å­—æ¥è¿›è¡Œç‰¹å®šçš„æµ‹è¯•ã€‚æŸ¥çœ‹æŠ€æœ¯æ‰‹å†Œ (xHCI ver 1.10 p.320) æ¥è·å–æ›´å¤šç›¸å…³ä¿¡æ¯ã€‚</td>
</tr>
</tbody>
</table>
<p>æ¥ä¸‹æ¥æ˜¯ <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtext mathvariant="normal">L1 Status</mtext><annotation encoding="application/x-tex">\text{L1 Status}</annotation></semantics></math> çš„æè¿°è¡¨ï¼š</p>
<table>
<thead>
<tr class="header">
<th style="text-align: center;">Value</th>
<th style="text-align: left;">å«ä¹‰</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">0</td>
<td style="text-align: left;">Invalidï¼Œä¸åˆæ³•ï¼Œå¦‚æœä¸º <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>0</mn><annotation encoding="application/x-tex">0</annotation></semantics></math>ï¼Œé‚£ä¹ˆ <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtext mathvariant="normal">L1 Status</mtext><annotation encoding="application/x-tex">\text{L1 Status}</annotation></semantics></math> åº”å½“è¢«å¿½ç•¥ã€‚</td>
</tr>
<tr class="even">
<td style="text-align: center;">1</td>
<td style="text-align: left;">Successï¼ŒæˆåŠŸã€‚ç«¯å£æˆåŠŸè½¬æ¢åˆ° L1 çŠ¶æ€ã€‚</td>
</tr>
<tr class="odd">
<td style="text-align: center;">2</td>
<td style="text-align: left;">Not Yetï¼Œä»æœªè½¬ç§»åˆ° L1 çŠ¶æ€ã€‚</td>
</tr>
<tr class="even">
<td style="text-align: center;">3</td>
<td style="text-align: left;">Not Supportedï¼Œè¯¥ç«¯å£ä¸æ”¯æŒè½¬ç§»åˆ° L1 çŠ¶æ€ã€‚</td>
</tr>
<tr class="odd">
<td style="text-align: center;">4</td>
<td style="text-align: left;">Timeout or Errorï¼Œè¶…æ—¶æˆ–è€…å‘ç”Ÿé”™è¯¯ã€‚</td>
</tr>
<tr class="even">
<td style="text-align: center;">5~7</td>
<td style="text-align: left;">Reserved</td>
</tr>
</tbody>
</table>
<p>å¯¹äºä½¿ç”¨ USB 3.0 çš„ç«¯å£ï¼Œä½¿ç”¨ä¸‹é¢çš„æè¿°ç¬¦è¡¨ï¼š</p>
<table>
<colgroup>
<col style="width: 24%" />
<col style="width: 40%" />
<col style="width: 36%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">Bit</th>
<th style="text-align: center;">Access</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">0:7</td>
<td style="text-align: center;">R/W</td>
<td style="text-align: left;">U1 Timeoutï¼Œè¡¨ç¤ºåœ¨ç¡®å®š U1 ä¸æ´»åŠ¨å¹¶å¯åŠ¨ U1 è¿›å…¥ä¹‹å‰çš„å»¶è¿Ÿï¼ˆä»¥å¾®ç§’ä¸ºå•ä½ï¼‰ã€‚åˆæ³•å€¼ä¸º <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="monospace">ğŸ¶ğš¡ğŸ¶ğŸ¶</mtext><mi>â€¦</mi><mtext mathvariant="monospace">ğŸ¶ğš¡ğŸ½ğš</mtext></mrow><annotation encoding="application/x-tex">\texttt{0x00}\dots\texttt{0x7f}</annotation></semantics></math> ä»¥åŠ <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtext mathvariant="monospace">ğŸ¶ğš¡ğšğš</mtext><annotation encoding="application/x-tex">\texttt{0xff}</annotation></semantics></math>ï¼Œè‹¥ä¸º <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtext mathvariant="monospace">ğŸ¶ğš¡ğŸ¶ğŸ¶</mtext><annotation encoding="application/x-tex">\texttt{0x00}</annotation></semantics></math> åˆ™è¡¨ç¤ºä¸èƒ½è¿›å…¥ U1ï¼Œå¦åˆ™è¡¨ç¤ºå¾®ç§’æ•°ã€‚</td>
</tr>
<tr class="even">
<td style="text-align: center;">8:15</td>
<td style="text-align: center;">R/W</td>
<td style="text-align: left;">U2 Timeourï¼Œè¡¨ç¤ºåœ¨ç¡®å®š U2 ä¸æ´»åŠ¨å¹¶å¯åŠ¨ U2 è¿›å…¥ä¹‹å‰çš„å»¶è¿Ÿï¼ˆä»¥å¾®ç§’ä¸ºå•ä½ï¼‰ã€‚åˆæ³•å€¼èŒƒå›´å’Œ U1 ç›¸åŒã€‚è‹¥ä¸º <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtext mathvariant="monospace">ğŸ¶ğš¡ğŸ¶ğŸ¶</mtext><annotation encoding="application/x-tex">\texttt{0x00}</annotation></semantics></math> è¡¨ç¤ºä¸èƒ½è¿›å…¥ U2ï¼Œå¦åˆ™å»¶è¿Ÿçš„å¾®ç§’æ•°ç­‰äºè¯¥æ®µçš„å€¼ä¹˜ä¸Š <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>256</mn><annotation encoding="application/x-tex">256</annotation></semantics></math></td>
</tr>
<tr class="odd">
<td style="text-align: center;">16</td>
<td style="text-align: center;">R/W</td>
<td style="text-align: left;">Force Link PM Acceptï¼Œå½“å€¼ä¸º <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>1</mn><annotation encoding="application/x-tex">1</annotation></semantics></math>ï¼Œè®©ç«¯å£å»ç”Ÿæˆä¸€ä¸ª Set Link Function LMP ã€‚ï¼ˆä¸çŸ¥é“å•¥æ„æ€ï¼Œè¿™é‡Œç²˜å‡ºåŸæ–‡ï¼štells the port to generate a Set Link Function LMP with the Force Link PM Accept Bit set.ï¼‰</td>
</tr>
<tr class="even">
<td style="text-align: center;">17:31</td>
<td style="text-align: center;">R/W</td>
<td style="text-align: left;">Reserved and preservedï¼Œä¿ç•™</td>
</tr>
</tbody>
</table>
<h3 id="lkinfoé“¾æ¥ä¿¡æ¯">lkInfoï¼Œé“¾æ¥ä¿¡æ¯</h3>
<p>è‹¥ç«¯å£ä¸º USB 2.0 é‚£ä¹ˆè¿™ä¸ªå¯„å­˜å™¨ä¸º Reserved and preserved ã€‚</p>
<p>è‹¥ç«¯å£ä¸º USB 3.0 é‚£ä¹ˆä½¿ç”¨ä¸‹é¢çš„æè¿°è¡¨ï¼š</p>
<table>
<thead>
<tr class="header">
<th style="text-align: center;">Bit</th>
<th style="text-align: center;">Access</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">0:15</td>
<td style="text-align: center;">RO</td>
<td style="text-align: left;">Link Error Countï¼Œæ£€æµ‹åˆ°çš„é“¾æ¥é”™è¯¯çš„çš„æ•°é‡ã€‚</td>
</tr>
<tr class="even">
<td style="text-align: center;">16:19</td>
<td style="text-align: center;">RO</td>
<td style="text-align: left;">Rx Lane Count (RLC)ï¼Œè¡¨ç¤ºç«¯å£åå•†çš„æ¥æ”¶ (Receive) é€šé“æ•°å‡å» <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>1</mn><annotation encoding="application/x-tex">1</annotation></semantics></math></td>
</tr>
<tr class="odd">
<td style="text-align: center;">20:23</td>
<td style="text-align: center;">RO</td>
<td style="text-align: left;">Tx Lane Count (RLC)ï¼Œè¡¨ç¤ºç«¯å£åå•†çš„ä¼ è¾“ (Transmit) é€šé“æ•°å‡å» <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>1</mn><annotation encoding="application/x-tex">1</annotation></semantics></math></td>
</tr>
<tr class="even">
<td style="text-align: center;">24:31</td>
<td style="text-align: center;">R/W</td>
<td style="text-align: left;">Reseerved and preservedï¼Œä¿ç•™</td>
</tr>
</tbody>
</table>
<h3 id="hwlpmctrlç¡¬ä»¶çš„-lpm-æ§åˆ¶å¯„å­˜å™¨">hwLPMCtrlï¼Œç¡¬ä»¶çš„ LPM æ§åˆ¶å¯„å­˜å™¨</h3>
<p>è‹¥ç«¯å£ä¸º USB 2.0 é‚£ä¹ˆä½¿ç”¨ä¸‹é¢çš„æè¿°è¡¨ï¼š</p>
<table>
<thead>
<tr class="header">
<th style="text-align: center;">Bit</th>
<th style="text-align: center;">Access</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">0:1</td>
<td style="text-align: center;">RWS</td>
<td style="text-align: left;">Host Initiated Resume Duration Mode (HIRDM)ï¼Œå¿…é¡»ä¸º <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>0</mn><annotation encoding="application/x-tex">0</annotation></semantics></math> æˆ– <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>1</mn><annotation encoding="application/x-tex">1</annotation></semantics></math> ã€‚</td>
</tr>
<tr class="even">
<td style="text-align: center;">2:9</td>
<td style="text-align: center;">RWS</td>
<td style="text-align: left;">L1 Timeoutï¼Œè¡¨ç¤ºè¶…æ—¶æ—¶é—´é™¤ä»¥ <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>128</mn><annotation encoding="application/x-tex">128</annotation></semantics></math></td>
</tr>
<tr class="odd">
<td style="text-align: center;">10:13</td>
<td style="text-align: center;">RWS</td>
<td style="text-align: left;">Best Effort Service Latency Deep (BESLD)ï¼Œè¡¨ç¤ºæ¥æ”¶è®¾å¤‡åœ¨ U2 é€€å‡ºåè¦ç­‰å¾…å¤šé•¿æ—¶é—´ã€‚</td>
</tr>
<tr class="even">
<td style="text-align: center;">14:31</td>
<td style="text-align: center;">RWS</td>
<td style="text-align: left;">Reserved and preservedï¼Œä¿ç•™</td>
</tr>
</tbody>
</table>
<p>è‹¥ç«¯å£ä¸º USB 3.0 é‚£ä¹ˆè¿™ä¸ªå¯„å­˜å™¨ä¸º Reserved and preserved ã€‚</p>
</body>
</html>
